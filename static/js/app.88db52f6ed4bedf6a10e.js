webpackJsonp([1],{"+rKi":function(e,t){},"/wAz":function(e,t){},"2VZZ":function(e,t){},"4H17":function(e,t){},"7lUh":function(e,t){},"7xIN":function(e,t){},"9DIE":function(e,t){},"A+n9":function(e,t){},AbzN:function(e,t){},C9xk:function(e,t){},GbK5:function(e,t){},IwDV:function(e,t){},MGoc:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={};a.d(i,"timestampToTime",function(){return I}),a.d(i,"setStore",function(){return k}),a.d(i,"getStore",function(){return w}),a.d(i,"removeStore",function(){return F}),a.d(i,"setCookie",function(){return x}),a.d(i,"getCookie",function(){return S}),a.d(i,"delCookie",function(){return N});var o=a("fZjL"),s=a.n(o),r=a("7+uW"),n=a("zL8q"),l=a.n(n),c=(a("tvR6"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]});var m=a("VU/8")({name:"App"},c,!1,function(e){a("RW+O")},null,null).exports,d=a("/ocq"),u=a("mvHQ"),p=a.n(u),h=a("mtWM"),g=a.n(h),f=function(e,t,a){return g()({method:e,url:t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("logintoken")},data:a,traditional:!0,transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}]}).then(function(e){return e.data})},v=function(e,t){return g()({method:"post",url:e,headers:{Authorization:localStorage.getItem("logintoken")},data:t}).then(function(e){return e.data})},b=function(e,t){return g()({method:"get",url:e,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("logintoken")},params:t,traditional:!0,transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}]}).then(function(e){return e.data})},_=function(e,t){return g()({method:"delete",url:e,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("logintoken")},params:t,traditional:!0,transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}]}).then(function(e){return e.data})},y=function(e){return function(e,t,a){return g()({method:e,url:t,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a,traditional:!0,transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}]}).then(function(e){return e.data})}("post","/user/login",e)},I=function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},k=function(e,t){e&&("string"!=typeof t&&(t=p()(t)),window.localStorage.setItem(e,t))},w=function(e){if(e)return window.localStorage.getItem(e)},F=function(e){e&&window.localStorage.removeItem(e)};function x(e,t,a){var i=new Date;i.setDate(i.getDate()+a),document.cookie=e+"="+t+";expires="+i}function S(e){var t=RegExp(e+"=([^;]+)"),a=document.cookie.match(t);return a?a[1]:""}function N(e){x(e,null,-1)}a("NC6I");var $={name:"login",data:function(){return{logining:!1,rememberpwd:!1,ruleForm:{username:"",password:"",code:"",randomStr:"",codeimg:""},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},created:function(){this.getuserpwd()},methods:{getuserpwd:function(){""!=S("user")&&""!=S("pwd")&&(this.ruleForm.username=S("user"),this.ruleForm.password=S("pwd"),this.rememberpwd=!0)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("请输入用户名密码！"),t.logining=!1,!1;t.logining=!0,y(t.ruleForm).then(function(e){if(!e.success)return t.$message.error(e.msg),t.logining=!1,!1;t.rememberpwd?(x("user",t.ruleForm.username,7),x("pwd",t.ruleForm.password,7)):(N("user"),N("pwd")),setTimeout(function(){t.logining=!1,localStorage.setItem("logintoken",e.data.token),localStorage.setItem("userdata",p()(e.data)),t.$store.commit("login","true"),t.$router.push({path:"/project/project"})},1e3)})})}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-wrap"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm login-container",attrs:{"label-position":"left",model:e.ruleForm,rules:e.rules,"label-width":"0px"}},[a("h3",{staticClass:"title"},[e._v("用户登录")]),e._v(" "),a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),a("el-checkbox",{staticClass:"remember",model:{value:e.rememberpwd,callback:function(t){e.rememberpwd=t},expression:"rememberpwd"}},[e._v("记住密码")]),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.logining},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")])],1)],1)],1)},staticRenderFns:[]};var z=a("VU/8")($,A,!1,function(e){a("A+n9")},"data-v-1d35f643",null).exports,D={name:"navcon",data:function(){return{collapsed:!0,imgshow:a("gQKk"),imgsq:a("rWRm"),user:{}}},created:function(){this.user=JSON.parse(localStorage.getItem("userdata"))},methods:{exit:function(){var e=this;this.$confirm("退出登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){b("/user/logout").then(function(t){if(!t.success)return e.$message.error(t.msg),e.logining=!1,!1;setTimeout(function(){e.$store.commit("logout","false"),e.$router.push({path:"/login"}),localStorage.removeItem("userInfo"),localStorage.removeItem("logintoken"),localStorage.removeItem("userdata"),e.$message({type:"success",message:"已退出登录!"})},1e3)}).catch(function(t){e.logining=!1,e.$message.error("退出失败，请稍后再试！")})}).catch(function(){e.$message({type:"info",message:"已取消"})})},toggle:function(e){this.collapsed=!e,this.$root.Bus.$emit("toggle",this.collapsed)}}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal","background-color":"#334157","text-color":"#fff","active-text-color":"#fff"}},[a("el-button",{staticClass:"buttonimg"},[a("img",{staticClass:"showimg",attrs:{src:e.collapsed?e.imgsq:e.imgshow},on:{click:function(t){return e.toggle(e.collapsed)}}})]),e._v(" "),a("el-submenu",{staticClass:"submenu",attrs:{index:"2"}},[a("template",{slot:"title"},[e._v("超级管理员")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-1"}},[e._v("设置")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-2"},on:{click:function(t){return e.content()}}},[e._v("个人中心")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-3"},on:{click:function(t){return e.exit()}}},[e._v("退出")])],2)],1)},staticRenderFns:[]};var T={projectName:"leftnav",data:function(){return{collapsed:!1,allmenu:[]}},created:function(){var e=this;(localStorage.getItem("logintoken"),b("/user/menu")).then(function(t){if(!t.success)return e.$message.error(t.msg),!1;e.allmenu=t.data}).catch(function(t){e.$message.error("菜单加载失败，请稍后再试！")}),this.$root.Bus.$on("toggle",function(t){e.collapsed=!t})}},E={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2",collapse:e.collapsed,"collapse-transition":"",router:"","default-active":e.$route.path,"unique-opened":"","background-color":"#334157","text-color":"#fff","active-text-color":"#ffd04b"}},[i("div",{staticClass:"logobox"},[i("img",{staticClass:"logoimg",attrs:{src:a("dLd/"),alt:""}})]),e._v(" "),e._l(e.allmenu,function(t){return i("el-submenu",{key:t.menuid,attrs:{index:t.menuname}},[i("template",{slot:"title"},[i("i",{staticClass:"iconfont",class:t.icon}),e._v(" "),i("span",[e._v(e._s(t.menuname))])]),e._v(" "),i("el-menu-item-group",e._l(t.menus,function(t){return i("el-menu-item",{key:t.menuid,attrs:{index:"/"+t.url}},[i("i",{staticClass:"iconfont",class:t.icon}),e._v(" "),i("span",[e._v(e._s(t.menuname))])])}),1)],2)})],2)},staticRenderFns:[]};var q={name:"index",data:function(){return{showclass:"asideshow",showtype:!1}},components:{navcon:a("VU/8")(D,C,!1,function(e){a("AbzN")},"data-v-407e1daa",null).exports,leftnav:a("VU/8")(T,E,!1,function(e){a("ppCh")},null,null).exports},methods:{},created:function(){var e=this;this.$root.Bus.$on("toggle",function(t){t?e.showclass="asideshow":setTimeout(function(){e.showclass="aside"},300)})},beforeUpdate:function(){},beforeMount:function(){this.$message({message:"登录成功",type:"success"})}},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"index-con"},[a("el-aside",{class:e.showclass},[a("leftnav")],1),e._v(" "),a("el-container",{staticClass:"main-con"},[a("el-header",{staticClass:"index-header"},[a("navcon")],1),e._v(" "),a("el-main",{attrs:{clss:"index-main"}},[a("keep-alive",[e.$route.meta.keepAlive?a("router-view"):e._e()],1),e._v(" "),e.$route.meta.keepAlive?e._e():a("router-view")],1)],1)],1)},staticRenderFns:[]};var j=a("VU/8")(q,V,!1,function(e){a("qPdO")},null,null).exports,U={render:function(){var e=this.$createElement;return(this._self._c||e)("el-pagination",{staticClass:"page-box",attrs:{background:"","current-page":this.childMsg.currentPage,"page-sizes":[10,20,30,40],"page-size":this.childMsg.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:this.childMsg.total},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}})},staticRenderFns:[]};var P=a("VU/8")({name:"Pagination",props:["childMsg"],data:function(){return{pageparm:{currentPage:this.childMsg.currentPage,pageSize:this.childMsg.pageSize}}},created:function(){},methods:{handleSizeChange:function(e){this.pageparm.pageSize=e,this.$emit("callFather",this.pageparm)},handleCurrentChange:function(e){this.pageparm.currentPage=e,this.$emit("callFather",this.pageparm)}}},U,!1,function(e){a("MGoc")},null,null).exports,R={data:function(){return{nshow:!0,fshow:!1,loading:!1,title:"添加用户",editFormVisible:!1,dataAccessshow:!1,unitAccessshow:!1,editForm:{userId:"",userName:"",userRealName:"",roleId:"",userMobile:"",userEmail:"",userSex:"",token:localStorage.getItem("logintoken")},unitparm:{userIds:"",deptId:"",deptName:""},selectdata:[],rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],userRealName:[{required:!0,message:"请输入姓名",trigger:"blur"}],roleId:[{required:!0,message:"请选择角色",trigger:"blur"}],userMobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1(3\d|47|5((?!4)\d)|7(0|1|[6-8])|8\d)\d{8,8}$/,required:!0,message:"请输入正确的手机号",trigger:"blur"}],userEmail:[{required:!0,message:"请输入邮箱",trigger:"blur"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,required:!0,message:"请输入正确的邮箱",trigger:"blur"}],userSex:[{required:!0,message:"请选择性别",trigger:"blur"}]},seletedata:{ids:"",token:localStorage.getItem("logintoken")},resetpsd:{userId:"",token:localStorage.getItem("logintoken")},offline:{token:localStorage.getItem("logintoken")},formInline:{page:1,limit:10,deptId:"",userName:"",userMobile:"",isLock:""},userData:[],UserDept:[],defaultProps:{children:"children",label:"name"},checkmenu:[],saveroleId:"",pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:P},watch:{},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){this.loading=!0;var t=12,a=[{addUser:"1",editUser:"1",addTime:null,editTime:1527411068e3,userId:1,systemNo:"pmd",userName:"root",userPassword:"e10adc3949ba59abbe56e057f20f883e",userRealName:"超级管理员",userSex:"女",userMobile:"138123456789",userEmail:"111@qq.com",isLock:"N",deptId:1,deptName:"xxxx",roleId:1},{addUser:"1",editUser:"1",addTime:null,editTime:1527410579e3,userId:3,systemNo:"mc",userName:"zengzhuo",userPassword:"e10adc3949ba59abbe56e057f20f883e",userRealName:"系统管理员",userSex:"M",userMobile:"18616988966",userEmail:"222@qq.com",isLock:"N",deptId:2,deptName:"xxxx",roleId:101},{addUser:"1",editUser:"4",addTime:null,editTime:1527411586e3,userId:4,systemNo:"ec",userName:"admin",userPassword:"59ba8b7dda9ff79186311a5a9fa155ca",userRealName:"超级管理员",userSex:"女",userMobile:"138123456789",userEmail:"huangxuekun@founder.com",isLock:"N",deptId:2,deptName:"xxxx",roleId:3},{addUser:null,editUser:null,addTime:1526275128e3,editTime:1526284402e3,userId:28,systemNo:null,userName:"eee111",userPassword:"e10adc3949ba59abbe56e057f20f883e",userRealName:"123111",userSex:"男",userMobile:"12354342345",userEmail:"111232@qq.com",isLock:"N",deptId:4,deptName:"zxxxxx",roleId:1},{addUser:null,editUser:null,addTime:1526284533e3,editTime:1526284533e3,userId:37,systemNo:null,userName:"ces",userPassword:"e10adc3949ba59abbe56e057f20f883e",userRealName:"sesfg",userSex:"男",userMobile:"12312312312",userEmail:"122111111",isLock:"N",deptId:1,deptName:"xxxx",roleId:1},{addUser:null,editUser:null,addTime:1526285228e3,editTime:1526285228e3,userId:43,systemNo:null,userName:"22",userPassword:"e10adc3949ba59abbe56e057f20f883e",userRealName:"22",userSex:"男",userMobile:"222",userEmail:"222",isLock:"N",deptId:1,deptName:"xxxx",roleId:1},{addUser:null,editUser:null,addTime:1526448593e3,editTime:1526448593e3,userId:58,systemNo:null,userName:"1",userPassword:"e10adc3949ba59abbe56e057f20f883e",userRealName:"1",userSex:"女",userMobile:"13607118810",userEmail:"1@qq.com",isLock:"N",deptId:1,deptName:"xxxx",roleId:1},{addUser:null,editUser:null,addTime:1526452698e3,editTime:1526520341e3,userId:60,systemNo:null,userName:"222222222",userPassword:"e10adc3949ba59abbe56e057f20f883e",userRealName:"222222222222",userSex:"男",userMobile:"13607118810",userEmail:"111@qq.com",isLock:"N",deptId:1,deptName:"xxxx",roleId:1},{addUser:null,editUser:null,addTime:1526452731e3,editTime:1526452731e3,userId:61,systemNo:null,userName:"33333333333333",userPassword:"e10adc3949ba59abbe56e057f20f883e",userRealName:"4444444444444444444",userSex:"女",userMobile:"13607118810",userEmail:"qqq@qq.com",isLock:"N",deptId:1,deptName:"xxxx",roleId:2},{addUser:null,editUser:null,addTime:1526452756e3,editTime:1527128981e3,userId:62,systemNo:null,userName:"211111111",userPassword:"e10adc3949ba59abbe56e057f20f883e",userRealName:"21111111111",userSex:"男",userMobile:"13601478451",userEmail:"222222@qq.com",isLock:"N",deptId:17,deptName:"v",roleId:2}];this.loading=!1,this.userData=a,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=t},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},editType:function(e,t){var a=this;this.loading=!0;var i={lock:"",userId:"",token:localStorage.getItem("logintoken")};i.userId=t.userId;var o,s=t.isLock;i.lock="N"==s?"Y":"N",(o=i,g.a.get("/api/User/lock?userId="+o.userId+"&lock="+o.lock+"&token="+localStorage.getItem("logintoken"))).then(function(e){a.loading=!1,0==e.success?a.$message({type:"info",message:e.msg}):(a.$message({type:"success",message:"状态修改成功"}),a.getdata(a.formInline))})},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改用户",this.editForm.userId=t.userId,this.editForm.userName=t.userName,this.editForm.userRealName=t.userRealName,this.editForm.roleId=t.roleId,this.editForm.userMobile=t.userMobile,this.editForm.userEmail=t.userEmail,this.editForm.userSex=t.userSex):(this.title="添加用户",this.editForm.userId="",this.editForm.userName="",this.editForm.userRealName="",this.editForm.roleId="",this.editForm.userMobile="",this.editForm.userEmail="",this.editForm.userSex="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.editForm,f("post","/api/User/save",a)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"数据保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("保存失败，请稍后再试！")})})},handleunit:function(e,t){var a=this;this.unitAccessshow=!0;var i;(i=0,g.a.get("/api/UserDept/deptTree/"+i+"?token="+localStorage.getItem("logintoken"))).then(function(e){e.data.success?a.UserDept=a.changeArr(e.data.data):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("配置权限失败,请稍后再试！")})},handleClick:function(e,t,a){t&&(this.$refs.tree.setCheckedNodes([]),this.$refs.tree.setCheckedNodes([e]),this.unitparm.deptId=e.id,this.unitparm.deptName=e.name)},unitPermSave:function(){var e,t=this,a=this.selectdata,i=[];if(0!=a)for(var o=0;o<a.length;o++)i.push(a[o].userId);this.unitparm.userIds=i.join(","),(e=this.unitparm,f("post","/api/User/change/dept",e)).then(function(e){t.unitAccessshow=!1,e.success?(t.$message({type:"success",message:"部门设置成功！"}),t.getdata(t.formInline)):t.$message({type:"info",message:e.msg})}).catch(function(e){t.loading=!1,t.$message.error("部门设置失败,请稍后再试！")})},selectChange:function(e){this.selectdata=e},closeDialog1:function(e){"edit"==e?this.editFormVisible=!1:"perm"==e?this.dataAccessshow=!1:"unit"==e&&(this.unitAccessshow=!1)},deleteUser:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.id,g.a.delete("/api/User/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})).then(function(e){e.success?(a.$message({type:"success",message:"数据已删除!"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("数据删除失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消删除！"})})},resetpwd:function(e,t){var a=this;this.resetpsd.userId=t.userId,this.$confirm("确定要重置密码吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=a.resetpsd,f("post","/api/User/pwd",e)).then(function(e){e.success?(a.$message({type:"success",message:"重置密码成功！"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("重置密码失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"取消重置密码！"})})},dataAccess:function(e,t){var a,i=this;this.dataAccessshow=!0,this.saveroleId=t.userId,(a=t.userId,g.a.get("/api/UserDept/tree/"+a+"?token="+localStorage.getItem("logintoken"))).then(function(e){e.data.success?(i.checkmenu=i.changemenu(e.data.data),i.UserDept=i.changeArr(e.data.data)):i.$message({type:"info",message:e.data.msg})}).catch(function(e){i.loading=!1,i.$message.error("获取权限失败，请稍后再试！")})},changeArr:function(e){for(var t={},a=[],i=0;0!=e.length;){if(0==e[i].pId)a.push({id:e[i].id,name:e[i].name,pId:e[i].pId,open:e[i].open,checked:e[i].checked,children:[]}),t[e[i].id]=[a.length-1],e.splice(i,1),i--;else{var o=t[e[i].pId];if(void 0!=o){for(var s=a[o[0]],r=1;r<o.length;r++)s=s.children[o[r]];s.children.push({id:e[i].id,name:e[i].name,pId:e[i].pId,open:e[i].open,checked:e[i].checked,children:[]}),t[e[i].id]=o.concat([s.children.length-1]),e.splice(i,1),i--}}++i>e.length-1&&(i=0)}return a},changemenu:function(e){for(var t=[],a=0;a<e.length;a++)e[a].checked&&t.push(e[a].id);return t},menuPermSave:function(){var e,t=this,a={userId:this.saveroleId,deptIds:""},i=this.$refs.tree.getCheckedNodes(),o=[];if(0!=i.length){for(var s=0;s<i.length;s++)o.push(i[s].id);a.deptIds=p()(o)}(e=a,f("post","/api/UserDept/save",e)).then(function(e){e.success?(t.$message({type:"success",message:"权限保存成功"}),t.dataAccessshow=!1,t.getdata(t.formInline)):t.$message({type:"info",message:e.msg})}).catch(function(e){t.loading=!1,t.$message.error("权限保存失败，请稍后再试！")})},offlineUser:function(e,t){var a=this;this.$confirm("确定要让"+t.userName+"用户下线吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.userName,f("get","/api/User/expireToken/"+e,{})).then(function(e){e.success?(a.$message({type:"success",message:"用户"+t.userName+"强制下线成功！"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("用户下线失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消"})})},refreshCache:function(e,t){var a,i=this;(a=t.userName,f("get","/api/User/flashCache/"+a,{})).then(function(e){e.success?(i.$message({type:"success",message:"刷新成功！"}),i.getdata(i.formInline)):i.$message({type:"info",message:e.msg})}).catch(function(e){i.loading=!1,i.$message.error("刷新失败，请稍后再试！")})}}},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("用户管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formInline.isLock,callback:function(t){e.$set(e.formInline,"isLock",t)},expression:"formInline.isLock"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"N"}}),e._v(" "),a("el-option",{attrs:{label:"已锁定",value:"Y"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{size:"small",placeholder:"输入用户名"},model:{value:e.formInline.userName,callback:function(t){e.$set(e.formInline,"userName",t)},expression:"formInline.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{size:"small",placeholder:"输入手机号"},model:{value:e.formInline.userMobile,callback:function(t){e.$set(e.formInline,"userMobile",t)},expression:"formInline.userMobile"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.handleunit()}}},[e._v("部门设置")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.userData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"},on:{"selection-change":e.selectChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",sortable:"",prop:"deptName",label:"公司",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",sortable:"",prop:"userName",label:"用户名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",sortable:"",prop:"userRealName",label:"姓名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",sortable:"",prop:"userMobile",label:"手机号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",sortable:"",prop:"userSex",label:"性别","min-width":"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",sortable:"",prop:"userEmail",label:"邮件","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",sortable:"",prop:"editTime",label:"修改时间","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.editTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",sortable:"",prop:"isLock",label:"状态","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.editType(t.$index,t.row)}},model:{value:"N"==t.row.isLock?e.nshow:e.fshow,callback:function(a){e.$set(t.row,"isLock=='N'?nshow:fshow",a)},expression:"scope.row.isLock=='N'?nshow:fshow"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.resetpwd(t.$index,t.row)}}},[e._v("重置密码")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.dataAccess(t.$index,t.row)}}},[e._v("数据权限")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.offlineUser(t.$index,t.row)}}},[e._v("下线")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.refreshCache(t.$index,t.row)}}},[e._v("刷新缓存")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:function(t){return e.closeDialog("edit")}}},[a("el-form",{ref:"editForm",attrs:{"label-width":"80px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入用户名"},model:{value:e.editForm.userName,callback:function(t){e.$set(e.editForm,"userName",t)},expression:"editForm.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"userRealName"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入姓名"},model:{value:e.editForm.userRealName,callback:function(t){e.$set(e.editForm,"userRealName",t)},expression:"editForm.userRealName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色",prop:"roleId"}},[a("el-select",{staticClass:"userRole",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editForm.roleId,callback:function(t){e.$set(e.editForm,"roleId",t)},expression:"editForm.roleId"}},[a("el-option",{attrs:{label:"公司管理员",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"普通用户",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"userMobile"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入手机号"},model:{value:e.editForm.userMobile,callback:function(t){e.$set(e.editForm,"userMobile",t)},expression:"editForm.userMobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮件",prop:"userEmail"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入邮箱地址"},model:{value:e.editForm.userEmail,callback:function(t){e.$set(e.editForm,"userEmail",t)},expression:"editForm.userEmail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"userSex"}},[a("el-radio",{attrs:{label:"男"},model:{value:e.editForm.userSex,callback:function(t){e.$set(e.editForm,"userSex",t)},expression:"editForm.userSex"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:"女"},model:{value:e.editForm.userSex,callback:function(t){e.$set(e.editForm,"userSex",t)},expression:"editForm.userSex"}},[e._v("女")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("edit")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"数据权限",visible:e.dataAccessshow,width:"30%"},on:{"update:visible":function(t){e.dataAccessshow=t},click:function(t){return e.closeDialog("perm")}}},[a("el-tree",{ref:"tree",attrs:{"default-expand-all":"",data:e.UserDept,props:e.defaultProps,"default-checked-keys":e.checkmenu,"node-key":"id","show-checkbox":""}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("perm")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:e.menuPermSave}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"所属单位",visible:e.unitAccessshow,width:"30%"},on:{"update:visible":function(t){e.unitAccessshow=t},click:function(t){return e.closeDialog("unit")}}},[a("el-tree",{ref:"tree",attrs:{"default-expand-all":"",data:e.UserDept,props:e.defaultProps,"default-checked-keys":e.checkmenu,"node-key":"id","show-checkbox":"","check-strictly":""},on:{"check-change":e.handleClick}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("unit")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:e.unitPermSave}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var M=a("VU/8")(R,L,!1,function(e){a("2VZZ")},"data-v-3a2c02d8",null).exports,B={data:function(){return{showdelete:!1,treeData:[],defaultProps:{children:"children",label:"name"},form:{addUser:"",editUser:"",addTime:"",editTime:"",moduleId:"",parentId:"",moduleLevel:"",systemNo:"",isLeaf:"",fullIndex:"",moduleIcon:"",moduleOrder:"",moduleName:"",moduleNotes:"",moduleUrl:""},rules:{parentId:[{required:!0,message:"请选择父级菜单",trigger:"blur"}],moduleName:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],moduleIcon:[{required:!0,message:"请输入菜单图标",trigger:"blur"}],moduleUrl:[{required:!0,message:"请输入URL",trigger:"blur"}],moduleOrder:[{required:!0,message:"请输入菜单顺序",trigger:"blur"}]},fmenu:[]}},created:function(){this.getdata(),this.getmenu()},methods:{getdata:function(){var e=this;f("post","/api/Module/list").then(function(t){e.treeData=[{id:1,pId:0,name:"平台顶级",open:!0,checked:!1},{id:2,pId:1,name:"一层",open:!0,checked:!1},{id:3,pId:1,name:"一层",open:!0,checked:!1},{id:12,pId:1,name:"一层",open:!0,checked:!1},{id:13,pId:1,name:"一层",open:!0,checked:!1},{id:17,pId:1,name:"一层",open:!0,checked:!1},{id:4,pId:2,name:"一层",open:!0,checked:!1},{id:5,pId:2,name:"一层",open:!0,checked:!1},{id:6,pId:2,name:"一层",open:!0,checked:!1},{id:7,pId:2,name:"一层",open:!0,checked:!1}]}).catch(function(t){e.loading=!1,e.$message.error("菜单管理列表失败，请稍后再试！")})},addModule:function(){this.showdelete=!1,this.form.addUser="",this.form.editUser="",this.form.addTime="",this.form.editTime="",this.form.moduleId="",this.form.parentId="",this.form.moduleLevel="",this.form.systemNo="",this.form.isLeaf="",this.form.fullIndex="",this.form.moduleIcon="",this.form.moduleOrder="",this.form.moduleName="",this.form.moduleNotes="",this.form.moduleUrl=""},getmenu:function(){var e,t=this;(e={page:"1",limit:"10"},f("post","/api/Module/nodes",e)).then(function(e){t.fmenu=e.data}).catch(function(e){t.loading=!1,t.$message.error("父级菜单列表获取失败，请稍后再试！")})},handleClick:function(e,t,a){t&&(this.$refs.tree.setCheckedNodes([]),this.$refs.tree.setCheckedNodes([e]),this.showdelete=!0)},nodeclick:function(e,t,a){var i,o=this;(i=e.id,g.a.get("/api/Module/get/"+i+"?token="+localStorage.getItem("logintoken"))).then(function(t){console.log(p()(t)),o.form=t.data.data,o.$refs.tree.setCheckedNodes([]),o.$refs.tree.setCheckedNodes([e])}).catch(function(e){o.loading=!1,o.$message.error("用户管理获取失败，请稍后再试！")})},saveModule:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.form,f("post","/api/Module/save",a)).then(function(e){t.getdata(),t.getmenu()}).catch(function(e){t.$message.error("菜单管理列表保存失败，请稍后再试！")})})},deleteModule:function(){var e,t=this;(e=this.form.moduleId,g.a.delete("/api/Module/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})).then(function(e){t.getdata(),t.getmenu(),t.$message.error("菜单管理列表删除成功！")}).catch(function(e){t.$message.error("菜单管理列表删除失败，请稍后再试！")})}}},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("菜单管理")])],1),e._v(" "),a("el-row",[a("div",{staticClass:"modt-box"},[e._v("用户管理")]),e._v(" "),a("el-col",{attrs:{span:4}}),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"mod-btnbox"},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("全部展开")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("全部压缩")])],1),e._v(" "),a("el-tree",{ref:"tree",staticClass:"treeclass",attrs:{data:e.treeData,"default-expand-all":"",props:e.defaultProps,"check-strictly":"","node-key":"id","show-checkbox":""},on:{"node-click":e.nodeclick,"check-change":e.handleClick}})],1),e._v(" "),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"mod-btnbox"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.addModule}},[e._v("添加")])],1),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"父级菜单",prop:"parentId"}},[a("el-select",{staticClass:"selectw",attrs:{size:"small",placeholder:"请选择"},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}},e._l(e.fmenu,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单名称",prop:"moduleName"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.moduleName,callback:function(t){e.$set(e.form,"moduleName",t)},expression:"form.moduleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图标",prop:"moduleIcon"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.moduleIcon,callback:function(t){e.$set(e.form,"moduleIcon",t)},expression:"form.moduleIcon"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"URL",prop:"moduleUrl"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.moduleUrl,callback:function(t){e.$set(e.form,"moduleUrl",t)},expression:"form.moduleUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"顺序",prop:"moduleOrder"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.moduleOrder,callback:function(t){e.$set(e.form,"moduleOrder",t)},expression:"form.moduleOrder"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.saveModule("form")}}},[e._v("保存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showdelete,expression:"showdelete"}],attrs:{size:"small",type:"primary"},on:{click:e.deleteModule}},[e._v("删除")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var K=a("VU/8")(B,O,!1,function(e){a("sPkX")},null,null).exports,H={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,menuAccessshow:!1,title:"添加",editForm:{roleId:"",systemNo:"",roleNo:"",roleName:"",token:localStorage.getItem("logintoken")},rules:{systemNo:[{required:!0,message:"请输入系统编码",trigger:"blur"}],roleNo:[{required:!0,message:"请输入角色代码",trigger:"blur"}],roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},formInline:{page:1,limit:10,varLable:"",varName:"",token:localStorage.getItem("logintoken")},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],RoleRight:[],RoleRightProps:{children:"children",label:"name"},checkmenu:[],saveroleId:"",pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:P},watch:{},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){var t=6,a=[{addUser:"root",editUser:"root",addTime:1519182004e3,editTime:1520288426e3,roleId:1,systemNo:"pmd",roleNo:"Administrator",roleName:"超级管理员"},{addUser:null,editUser:null,addTime:1521111376e3,editTime:1520678191e3,roleId:2,systemNo:"order",roleNo:"admin",roleName:"公司管理员"},{addUser:null,editUser:null,addTime:1520678221e3,editTime:1520678221e3,roleId:95,systemNo:"pm",roleNo:"common",roleName:"普通用户"},{addUser:null,editUser:null,addTime:1526349853e3,editTime:1526349853e3,roleId:96,systemNo:"1",roleNo:"1",roleName:"1"},{addUser:null,editUser:null,addTime:1526349942e3,editTime:1526437443e3,roleId:97,systemNo:"2",roleNo:"2",roleName:"2"},{addUser:null,editUser:null,addTime:1526652148e3,editTime:1526652148e3,roleId:101,systemNo:"test",roleNo:"demo",roleName:"演示角色"}];this.loading=!1,this.listData=a,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=t},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.roleId=t.roleId,this.editForm.systemNo=t.systemNo,this.editForm.roleNo=t.roleNo,this.editForm.roleName=t.roleName):(this.title="添加",this.editForm.roleId="",this.editForm.systemNo="",this.editForm.roleNo="",this.editForm.roleName="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.editForm,f("post","/api/Role/save",a)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"角色保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("角色保存失败，请稍后再试！")})})},deleteUser:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.roleId,g.a.delete("/api/Role/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})).then(function(e){e.success?(a.$message({type:"success",message:"角色已删除！"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("角色删除失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},menuAccess:function(e,t){var a,i=this;this.menuAccessshow=!0,this.saveroleId=t.roleId,(a=t.roleId,g.a.get("/api/RoleRight/tree/"+a+"?token="+localStorage.getItem("logintoken"))).then(function(e){e.data.success?(i.$message({type:"success",message:"获取权限成功"}),i.changemenu(e.data.data),i.RoleRight=i.changeArr(e.data.data)):i.$message({type:"info",message:e.data.msg})}).catch(function(e){i.loading=!1,i.$message.error("获取权限失败，请稍后再试！")})},changemenu:function(e){for(var t=[],a=0;a<e.length;a++)e[a].checked&&t.push(e[a].id);this.checkmenu=t},changeArr:function(e){var t=[],a=[],i=[];for(var o in e){if(!t[e[o].id]){var s={id:e[o].id,pId:e[o].pId,name:e[o].name,open:e[o].open,checked:e[o].checked,children:[]};t[e[o].id]=s,i.push(s)}e[o].uid>0&&t[e[o].id].children.push({id:e[o].id,pId:e[o].pId,name:e[o].name,open:e[o].open,checked:e[o].checked,children:[]})}for(var r in i)t[i[r].pId]?t[i[r].pId].children.push(t[i[r].id]):a.push(t[i[r].id]);return t=null,i=null,a},menuPermSave:function(){var e,t=this,a={roleId:this.saveroleId,moduleIds:""},i=this.$refs.tree.getCheckedNodes(),o=[];if(0!=i.length){for(var s=0;s<i.length;s++)o.push(i[s].id);a.moduleIds=p()(o)}(e=a,f("post","/api/RoleRight/save",e)).then(function(e){e.success?(t.$message({type:"success",message:"权限保存成功"}),t.menuAccessshow=!1,t.getdata(t.formInline)):t.$message({type:"info",message:e.msg})}).catch(function(e){t.loading=!1,t.$message.error("权限保存失败，请稍后再试！")})},closeDialog1:function(e){"edit"==e?this.editFormVisible=!1:"perm"==e&&(this.menuAccessshow=!1)}}},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("角色管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-input",{attrs:{size:"small",placeholder:"输入角色名称"},model:{value:e.formInline.roleName,callback:function(t){e.$set(e.formInline,"roleName",t)},expression:"formInline.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{size:"small",placeholder:"输入角色代码"},model:{value:e.formInline.roleNo,callback:function(t){e.$set(e.formInline,"roleNo",t)},expression:"formInline.roleNo"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"roleName",label:"角色名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"roleNo",label:"角色代码",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editTime",label:"修改时间",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.editTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editUser",label:"修改人",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.menuAccess(t.$index,t.row)}}},[e._v("菜单权限")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:function(t){return e.closeDialog("edit")}}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"系统编码",prop:"systemNo"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入系统编码"},model:{value:e.editForm.systemNo,callback:function(t){e.$set(e.editForm,"systemNo",t)},expression:"editForm.systemNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入角色名称"},model:{value:e.editForm.roleName,callback:function(t){e.$set(e.editForm,"roleName",t)},expression:"editForm.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色代码",prop:"roleNo"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入角色代码"},model:{value:e.editForm.roleNo,callback:function(t){e.$set(e.editForm,"roleNo",t)},expression:"editForm.roleNo"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("edit")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"菜单权限",visible:e.menuAccessshow,width:"30%"},on:{"update:visible":function(t){e.menuAccessshow=t},click:function(t){return e.closeDialog("perm")}}},[a("el-tree",{ref:"tree",attrs:{"default-expand-all":"",data:e.RoleRight,props:e.RoleRightProps,"default-checked-keys":e.checkmenu,"node-key":"id","show-checkbox":""}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("perm")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:e.menuPermSave}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var G=a("VU/8")(H,Y,!1,function(e){a("IwDV")},"data-v-8dea5440",null).exports,W={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",editForm:{deptId:"",deptName:"",deptNo:"",token:localStorage.getItem("logintoken")},rules:{deptName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],deptNo:[{required:!0,message:"请输入部门代码",trigger:"blur"}]},formInline:{page:1,limit:10,varLable:"",varName:"",token:localStorage.getItem("logintoken")},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:P},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){this.loading=!0;var t=5,a=[{addUser:null,editUser:null,addTime:1521062371e3,editTime:15267002e5,deptId:2,deptName:"上海分公司",deptNo:"1",parentId:1},{addUser:null,editUser:null,addTime:1521063247e3,editTime:1526652291e3,deptId:3,deptName:"上海测试",deptNo:"02",parentId:1},{addUser:null,editUser:null,addTime:1526349555e3,editTime:1526349565e3,deptId:12,deptName:"1",deptNo:"11",parentId:1},{addUser:null,editUser:null,addTime:1526373178e3,editTime:1526373178e3,deptId:13,deptName:"5",deptNo:"5",parentId:1},{addUser:null,editUser:null,addTime:1526453107e3,editTime:1526453107e3,deptId:17,deptName:"v",deptNo:"v",parentId:1}];this.loading=!1,this.listData=a,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=t},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.deptId=t.deptId,this.editForm.deptName=t.deptName,this.editForm.deptNo=t.deptNo):(this.title="添加",this.editForm.deptId="",this.editForm.deptName="",this.editForm.deptNo="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.editForm,f("post","/api/Dept/save",a)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"公司保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("公司保存失败，请稍后再试！")})})},deleteUser:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.deptId,g.a.get("/api/Dept/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})).then(function(e){e.success?(a.$message({type:"success",message:"公司已删除!"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("公司删除失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},closeDialog1:function(){this.editFormVisible=!1}}},J={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("公司管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-input",{attrs:{size:"small",placeholder:"输入部门名称"},model:{value:e.formInline.deptName,callback:function(t){e.$set(e.formInline,"deptName",t)},expression:"formInline.deptName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{size:"small",placeholder:"输入部门代码"},model:{value:e.formInline.deptNo,callback:function(t){e.$set(e.formInline,"deptNo",t)},expression:"formInline.deptNo"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"deptName",label:"部门名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"deptNo",label:"部门代码",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editTime",label:"修改时间",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.editTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editUser",label:"修改人",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"部门名称",prop:"deptName"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入部门名称"},model:{value:e.editForm.deptName,callback:function(t){e.$set(e.editForm,"deptName",t)},expression:"editForm.deptName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门代码",prop:"deptNo"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入部门代码"},model:{value:e.editForm.deptNo,callback:function(t){e.$set(e.editForm,"deptNo",t)},expression:"editForm.deptNo"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var Q=a("VU/8")(W,J,!1,function(e){a("/wAz")},"data-v-3ec0076e",null).exports,X={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",editForm:{varId:"",varLable:"",varName:"",varValue:"",token:localStorage.getItem("logintoken")},rules:{varLable:[{required:!0,message:"请输入变量描述",trigger:"blur"}],varName:[{required:!0,message:"请输入变量名称",trigger:"blur"}],varValue:[{required:!0,message:"请输入变量名称",trigger:"blur"}]},formInline:{page:1,limit:10,varLable:"",varName:"",token:localStorage.getItem("logintoken")},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:P},watch:{},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){this.loading=!0;var t=6,a=[{addUser:"root",editUser:"root",addTime:1519385529e3,editTime:1520619747e3,varId:190,deptId:1,varLable:"支付访问域名",varName:"domainName",varValue:"http://127.0.0.1:8080/iot-service-pay"},{addUser:"root",editUser:"root",addTime:1519451541e3,editTime:1519451547e3,varId:191,deptId:1,varLable:"商品图片地址",varName:"productImgURL",varValue:"http://ymwlw.com/pic"},{addUser:"root",editUser:"root",addTime:1519452658e3,editTime:1519452661e3,varId:192,deptId:1,varLable:"手机支付广告地址",varName:"groupDomain",varValue:"http://ymwlwl.com"},{addUser:null,editUser:null,addTime:1519879624e3,editTime:1519879628e3,varId:193,deptId:1,varLable:"下单接口测试模式",varName:"envType",varValue:"false"},{addUser:null,editUser:null,addTime:1526374014e3,editTime:1526374031e3,varId:198,deptId:null,varLable:"sgh",varName:"jhjj",varValue:"jhjhgs"},{addUser:null,editUser:null,addTime:1526453243e3,editTime:1526453243e3,varId:199,deptId:null,varLable:"v",varName:"v",varValue:"v"}];this.loading=!1,this.listData=a,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=t},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.varId=t.varId,this.editForm.varLable=t.varLable,this.editForm.varName=t.varName,this.editForm.varValue=t.varValue):(this.title="添加",this.editForm.varId="",this.editForm.varLable="",this.editForm.varName="",this.editForm.varValue="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.editForm,f("post","/api/Variable/save",a)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"系统环境变量保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("系统环境变量保存失败，请稍后再试！")})})},deleteUser:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.varId,g.a.delete("/api/Variable/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})).then(function(e){e.success?(a.$message({type:"success",message:"系统环境变量已删除"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("系统环境变量删除失败，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},closeDialog1:function(){this.editFormVisible=!1}}},Z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("系统环境变量")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-input",{attrs:{size:"small",placeholder:"输入变量描述"},model:{value:e.formInline.varLable,callback:function(t){e.$set(e.formInline,"varLable",t)},expression:"formInline.varLable"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{size:"small",placeholder:"输入变量名称"},model:{value:e.formInline.varName,callback:function(t){e.$set(e.formInline,"varName",t)},expression:"formInline.varName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"varLable",label:"变量描述",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"varName",label:"变量名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"varValue",label:"变量名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editTime",label:"修改时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.editTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editUser",label:"修改人",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:"修改",visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"变量描述",prop:"varLable"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"变量描述"},model:{value:e.editForm.varLable,callback:function(t){e.$set(e.editForm,"varLable",t)},expression:"editForm.varLable"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"变量名称",prop:"varName"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"变量名称"},model:{value:e.editForm.varName,callback:function(t){e.$set(e.editForm,"varName",t)},expression:"editForm.varName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"变量名称",prop:"varValue"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"变量名称"},model:{value:e.editForm.varValue,callback:function(t){e.$set(e.editForm,"varValue",t)},expression:"editForm.varValue"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var ee=a("VU/8")(X,Z,!1,function(e){a("y8Ma")},"data-v-26ed9ded",null).exports,te={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",editForm:{permissionId:"",permissionName:"",permission:"",token:localStorage.getItem("logintoken")},rules:{permissionName:[{required:!0,message:"请输入权限名称",trigger:"blur"}],permission:[{required:!0,message:"请输入权限CODE",trigger:"blur"}]},formInline:{page:1,limit:10,permissionName:"",permission:"",roleId:"0",token:localStorage.getItem("logintoken")},selectdata:[],userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,total:10}}},components:{Pagination:P},watch:{},created:function(){this.getdata(this.formInline),this.getAccsee()},methods:{getdata:function(e){this.loading=!0;var t=0,a=[{addUser:null,editUser:null,addTime:1519728609e3,editTime:15225857e5,permissionId:1,permissionName:"用户-列表",permission:"system:User:list",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:null,editUser:null,addTime:1519728667e3,editTime:1522585706e3,permissionId:3,permissionName:"用户-修改",permission:"system:User:save",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:null,editUser:null,addTime:1519728669e3,editTime:1522256096e3,permissionId:4,permissionName:"用户-删除",permission:"system:User:delete",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:"root",editUser:"root",addTime:1520249365e3,editTime:1522256085e3,permissionId:5,permissionName:"系统管理:角色:列表",permission:"system:Role:list",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:"root",editUser:"root",addTime:1520249588e3,editTime:1520249588e3,permissionId:7,permissionName:"system:Role:save",permission:"system:Role:save",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:"root",editUser:"root",addTime:1520249588e3,editTime:1520249588e3,permissionId:8,permissionName:"system:Role:delete",permission:"system:Role:delete",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:"root",editUser:"root",addTime:1520251014e3,editTime:1520251014e3,permissionId:9,permissionName:"system:Variable:列表",permission:"system:Variable:list",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:"root",editUser:"root",addTime:1520251014e3,editTime:1520251014e3,permissionId:11,permissionName:"system:Variable:修改",permission:"system:Variable:save",lay_CHECKED:!1,LAY_CHECKED:!1},{addUser:"root",editUser:"root",addTime:1520251014e3,editTime:1520251014e3,permissionId:12,permissionName:"system:Variable:删除",permission:"system:Variable:delete",lay_CHECKED:!1,LAY_CHECKED:!1}];this.loading=!1,this.listData=a,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,this.pageparm.total=t},getAccsee:function(){var e=this;g.a.get("/api/Role/dropDown/all?&token="+localStorage.getItem("logintoken")).then(function(e){return e.data}).then(function(t){0==t.success?e.$message({type:"info",message:t.msg}):e.userparm=t.data}).catch(function(t){e.$message.error("权限获取失败，请稍后再试！")})},callFather:function(e){this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline)},search:function(){this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.permissionId=t.permissionId,this.editForm.permissionName=t.permissionName,this.editForm.permission=t.permission):(this.title="添加",this.editForm.permissionId="",this.editForm.permissionName="",this.editForm.permission="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.editForm,f("post","/api/Permission/save",a)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:"权限管理保存成功！"})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("权限管理保存失败，请稍后再试！")})})},deleteUser:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.permissionId,g.a.delete("/api/Permission/delete?ids="+e+"&token="+localStorage.getItem("logintoken")).then(function(e){return e.data})).then(function(e){e.success?(a.$message({type:"success",message:"权限管理已删除！"}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("权限管理删除失败,请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},selectChange:function(e){this.selectdata=e},RolePermission:function(){var e=this,t={roleId:"",permissionIds:""};if("0"==this.formInline.roleId)return this.$message({type:"info",message:"请选择角色"}),!1;t.roleId=this.formInline.roleId;var a,i=this.selectdata,o=[];if(0!=i)for(var s=0;s<i.length;s++)o.push(i[s].permissionId);t.permissionIds=o.join(","),(a=t,f("post","/api/RolePermission/save",a)).then(function(t){t.success?(e.$message({type:"success",message:"配置权限成功！"}),e.getdata(e.formInline)):e.$message({type:"info",message:t.msg})}).catch(function(t){e.loading=!1,e.$message.error("配置权限失败,请稍后再试！")})},closeDialog1:function(){this.editFormVisible=!1}}},ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("权限管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-input",{attrs:{size:"small",placeholder:"输入权限名称"},model:{value:e.formInline.permissionName,callback:function(t){e.$set(e.formInline,"permissionName",t)},expression:"formInline.permissionName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{size:"small",placeholder:"输入权限CODE"},model:{value:e.formInline.permission,callback:function(t){e.$set(e.formInline,"permission",t)},expression:"formInline.permission"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色："}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formInline.roleId,callback:function(t){e.$set(e.formInline,"roleId",t)},expression:"formInline.roleId"}},[a("el-option",{attrs:{selected:"",label:"请选择",value:"0"}}),e._v(" "),e._l(e.userparm,function(e){return a("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.RolePermission()}}},[e._v("配置权限")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"},on:{"selection-change":e.selectChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"permissionName",label:"权限名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"permission",label:"权限CODE",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editTime",label:"修改时间",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.editTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"editUser",label:"修改人",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"权限名称",prop:"permissionName"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"权限名称"},model:{value:e.editForm.permissionName,callback:function(t){e.$set(e.editForm,"permissionName",t)},expression:"editForm.permissionName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限CODE",prop:"permission"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"权限CODE"},model:{value:e.editForm.permission,callback:function(t){e.$set(e.editForm,"permission",t)},expression:"editForm.permission"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var ie=a("VU/8")(te,ae,!1,function(e){a("9DIE")},"data-v-05cff04b",null).exports,oe=a("XLwt"),se=a.n(oe),re={name:"welcome",data:function(){return{machineNo:"",type:"day",SCEoption:{tooltip:{trigger:"item",formatter:"{a} <br/>{b}月 : {c}"},legend:{data:[{name:"销售总笔数",icon:"rect"}],top:1,left:1,itemGap:10,itemWidth:12,itemHeight:12,textStyle:{fontSize:12,color:"#323232"}},grid:{left:50,right:10,top:30,bottom:30,borderWidth:1},xAxis:{type:"category",data:["1","2","3","4","5","6","7","8","9","10","11","12"],axisLine:{lineStyle:{color:"#999999",width:1}},axisLabel:{margin:14,height:70,interval:0,textStyle:{fontSize:10,color:"#999999"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#999999",width:1}},axisLabel:{margin:14,textStyle:{fontSize:10,color:"#999999"}}},series:[{name:"销售总笔数",type:"bar",barGap:0,data:[5e4,7e4,8e4,4e4,5e4,3e4,4e4,6e4,5e4,4e4,6e4,4e4],barWidth:10,itemStyle:{normal:{color:new se.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#83bff6"},{offset:.5,color:"#188df0"},{offset:1,color:"#188df0"}])},emphasis:{color:new se.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#2378f7"},{offset:.7,color:"#2378f7"},{offset:1,color:"#83bff6"}])}}}]},SUMoption:{tooltip:{trigger:"item",formatter:"{a} <br/>{b}月 : {c}"},legend:{data:[{name:"销售总金额",icon:"rect"}],top:1,left:1,itemGap:10,itemWidth:12,itemHeight:12,textStyle:{fontSize:12,color:"#323232"}},grid:{left:50,right:10,top:30,bottom:30,borderWidth:1},xAxis:{type:"category",data:["1","2","3","4","5","6","7","8","9","10","11","12"],axisLine:{lineStyle:{color:"#999999",width:1}},axisLabel:{margin:14,height:70,interval:0,textStyle:{fontSize:10,color:"#999999"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#999999",width:1}},axisLabel:{margin:14,textStyle:{fontSize:10,color:"#999999"}}},series:[{name:"销售总金额",type:"line",barGap:0,data:[5e4,7e4,8e4,4e4,5e4,3e4,4e4,6e4,5e4,4e4,6e4,4e4],barWidth:10,itemStyle:{color:"#108ff9"}}]},Clickoption:{tooltip:{trigger:"item",formatter:"{a} <br/>{b}月 : {c}"},legend:{data:[{name:"总点击量",icon:"rect"}],top:1,left:1,itemGap:10,itemWidth:12,itemHeight:12,textStyle:{fontSize:12,color:"#323232"}},grid:{left:50,right:10,top:30,bottom:30,borderWidth:1},xAxis:{type:"category",data:["1","2","3","4","5","6","7","8","9","10","11","12"],axisLine:{lineStyle:{color:"#999999",width:1}},axisLabel:{margin:14,height:70,interval:0,textStyle:{fontSize:10,color:"#999999"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#999999",width:1}},axisLabel:{margin:14,textStyle:{fontSize:10,color:"#999999"}}},series:[{name:"总点击量",type:"bar",barGap:0,data:[5e4,1e4,8e4,3e4,5e4,6e4,4e4,8e4,5e4,2e4,6e4,4e4],barWidth:10,itemStyle:{color:"#48cefd"}}]},payoption:{backgroundColor:"#2c343c",title:{text:"支付方式统计(金额)",left:10,top:5,textStyle:{fontSize:12,color:"#ccc"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},visualMap:{show:!1,min:80,max:600,inRange:{colorLightness:[0,1]}},series:[{name:"支付方式统计(金额)",type:"pie",radius:"55%",center:["50%","50%"],data:[{value:335,name:"支付宝"},{value:310,name:"银商二维码"},{value:274,name:"会员"},{value:235,name:"微信支付"},{value:100,name:"Pos通"}].sort(function(e,t){return e.value-t.value}),roseType:"radius",label:{normal:{textStyle:{color:"rgba(255, 255, 255, 0.3)"}}},labelLine:{normal:{lineStyle:{color:"rgba(255, 255, 255, 0.3)"},smooth:.2,length:10,length2:20}},itemStyle:{normal:{color:"#c23531",shadowBlur:200,shadowColor:"rgba(0, 0, 0, 0.5)"}},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]},payNumoption:{backgroundColor:"#2c343c",title:{text:"支付方式统计(笔数)",left:10,top:5,textStyle:{fontSize:12,color:"#ccc"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},visualMap:{show:!1,min:80,max:600,inRange:{colorLightness:[0,1]}},series:[{name:"支付方式统计(笔数)",type:"pie",radius:"55%",center:["50%","50%"],data:[{value:335,name:"支付宝"},{value:310,name:"银商二维码"},{value:274,name:"会员"},{value:235,name:"微信支付"},{value:100,name:"Pos通"}].sort(function(e,t){return e.value-t.value}),roseType:"radius",label:{normal:{textStyle:{color:"rgba(255, 255, 255, 0.3)"}}},labelLine:{normal:{lineStyle:{color:"rgba(255, 255, 255, 0.3)"},smooth:.2,length:10,length2:20}},itemStyle:{normal:{color:"#c23531",shadowBlur:200,shadowColor:"rgba(0, 0, 0, 0.5)"}},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]}}},components:{},created:function(){},mounted:function(){this.getSCE(),this.getSUM(),this.getClick(),this.getpay(),this.getpayNum()},methods:{getSCE:function(){this.chart=se.a.init(this.$refs.SCEchart),this.chart.setOption(this.SCEoption)},getSUM:function(){this.chart=se.a.init(this.$refs.SUMEchart),this.chart.setOption(this.SUMoption)},getClick:function(){this.chart=se.a.init(this.$refs.ClickEchart),this.chart.setOption(this.Clickoption)},getpay:function(){this.chart=se.a.init(this.$refs.payEchart),this.chart.setOption(this.payoption)},getpayNum:function(){this.chart=se.a.init(this.$refs.payNumEchart),this.chart.setOption(this.payNumoption)}}},ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"stbox"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("数据可视化")])],1),e._v(" "),a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:18}},[a("div",{staticClass:"stbgc"},[a("el-row",{attrs:{gutter:23}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{size:"small",placeholder:"请输入所属公司"},model:{value:e.machineNo,callback:function(t){e.machineNo=t},expression:"machineNo"}})],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{size:"small",placeholder:"请输入资产编号"},model:{value:e.machineNo,callback:function(t){e.machineNo=t},expression:"machineNo"}})],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.machineNo,callback:function(t){e.machineNo=t},expression:"machineNo"}})],1),e._v(" "),a("el-col",{staticClass:"stsearch",attrs:{span:3}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("搜索")])],1)],1)],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"stbgc"},[a("el-row",[a("el-col",{staticClass:"text-c",attrs:{span:8}},[a("el-radio",{attrs:{label:"day"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("日")])],1),e._v(" "),a("el-col",{staticClass:"text-c",attrs:{span:8}},[a("el-radio",{attrs:{label:"month"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("月")])],1),e._v(" "),a("el-col",{staticClass:"text-c",attrs:{span:8}},[a("el-radio",{attrs:{label:"years"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("年")])],1)],1)],1)])],1),e._v(" "),a("el-row",{attrs:{gutter:23}},[a("el-col",{staticClass:"text-c",attrs:{span:8}},[a("div",{staticClass:"st-gbox"},[a("div",{ref:"SCEchart",staticClass:"cavasbox"})])]),e._v(" "),a("el-col",{staticClass:"text-c",attrs:{span:8}},[a("div",{staticClass:"st-gbox"},[a("div",{ref:"SUMEchart",staticClass:"cavasbox"})])]),e._v(" "),a("el-col",{staticClass:"text-c",attrs:{span:8}},[a("div",{staticClass:"st-gbox"},[a("div",{ref:"ClickEchart",staticClass:"cavasbox"})])])],1),e._v(" "),a("div",[a("el-row",{attrs:{gutter:23}},[a("el-col",{staticClass:"text-c",attrs:{span:12}},[a("div",{staticClass:"paybox"},[a("div",{ref:"payEchart",staticClass:"cavasbox"})])]),e._v(" "),a("el-col",{staticClass:"text-c",attrs:{span:12}},[a("div",{staticClass:"paybox"},[a("div",{ref:"payNumEchart",staticClass:"cavasbox"})])])],1)],1)],1)},staticRenderFns:[]};var le=a("VU/8")(re,ne,!1,function(e){a("paIn")},null,null).exports,ce=function(e){return b("/project/getAllProject",e)},me={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",editForm:{id:"",projectName:"",projectDescription:"",create_time:"",token:localStorage.getItem("logintoken")},rules:{projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],projectDescription:[{required:!0,message:"请输入项目描述",trigger:"blur"}]},formInline:{page:1,limit:10,varLable:"",varName:"",projectName:"",token:localStorage.getItem("logintoken")},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,oldPageSize:10,total:10}}},components:{Pagination:P},created:function(){this.getdata(this.formInline)},methods:{getdata:function(e){var t,a=this;this.loading=!0,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,e={currentPage:this.pageparm.currentPage,pageSize:this.pageparm.pageSize,projectName:this.formInline.projectName},(t=e,b("/project/projectList",t)).then(function(e){a.loading=!1,0==e.success?a.$message({type:"info",message:e.msg}):(a.listData=e.data,a.pageparm.total=e.count)}).catch(function(e){a.loading=!1,console.log(e),a.$message.error("菜单加载失败，请稍后再试！")})},callFather:function(e){this.pageparm.pageSize!==e.pageSize?(this.formInline.page=1,this.formInline.limit=e.pageSize,this.getdata(this.formInline)):(this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline))},search:function(){this.formInline.page=1,this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.id=t.id,this.editForm.projectName=t.projectName,this.editForm.projectDescription=t.projectDescription):(this.title="添加",this.editForm.id="",this.editForm.projectName="",this.editForm.projectDescription="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.editForm,v("/project/saveProject",a)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:e.msg})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("项目保存失败，请稍后再试！")})})},projectDelete:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e,i={id:t.id};(e=i,_("/project/deleteProject",e)).then(function(e){e.success?(a.$message({type:"success",message:e.msg}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("项目删除失败，请稍后再试！")})}).catch(function(e){console.log(e)})},closeDialog1:function(){this.editFormVisible=!1}}},de={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("项目管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"搜索："}},[a("el-input",{attrs:{size:"small",placeholder:"输入项目名称"},model:{value:e.formInline.projectName,callback:function(t){e.$set(e.formInline,"projectName",t)},expression:"formInline.projectName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"projectName",label:"项目名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"projectDescription",label:"项目描述",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"create_time",label:"创建时间",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.projectDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入项目名称"},model:{value:e.editForm.projectName,callback:function(t){e.$set(e.editForm,"projectName",t)},expression:"editForm.projectName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目描述",prop:"projectDescription"}},[a("el-input",{attrs:{type:"textarea",size:"small","auto-complete":"off",placeholder:"请输入项目描述"},model:{value:e.editForm.projectDescription,callback:function(t){e.$set(e.editForm,"projectDescription",t)},expression:"editForm.projectDescription"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var ue=a("VU/8")(me,de,!1,function(e){a("Xtd4")},"data-v-7d71524d",null).exports,pe={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",disabled:!1,editForm:{id:"",p_name:"",e_name:"",url:"",e_description:"",create_time:"",token:localStorage.getItem("logintoken")},rules:{p_name:[{required:!0,message:"请输入环境名称",trigger:"blur"}],e_name:[{required:!0,message:"请输入环境名称",trigger:"blur"}],url:[{required:!0,message:"请输入url",trigger:"blur"}],e_description:[{required:!0,message:"请输入项目描述",trigger:"blur"}]},projects:"",state:"",formInline:{page:1,limit:10,varLable:"",varName:"",projectName:"",token:localStorage.getItem("logintoken")},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,oldPageSize:10,total:10}}},components:{Pagination:P},created:function(){this.getdata(this.formInline),this.loadAllProject()},methods:{getdata:function(e){var t,a=this;this.loading=!0,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,e={currentPage:this.pageparm.currentPage,pageSize:this.pageparm.pageSize,projectName:this.formInline.projectName},(t=e,b("/project/projectEnvironmentList",t)).then(function(e){a.loading=!1,!1===e.success?a.$message({type:"info",message:e.msg}):(a.listData=e.data,a.pageparm.total=e.count)}).catch(function(e){a.loading=!1,console.log(e),a.$message.error("菜单加载失败，请稍后再试！")})},callFather:function(e){this.pageparm.pageSize!==e.pageSize?(this.formInline.page=1,this.formInline.limit=e.pageSize,this.getdata(this.formInline)):(this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline))},search:function(){this.formInline.page=1,this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.disabled=!0,this.editForm.id=t.id,this.editForm.p_name=t.projectName,this.editForm.e_name=t.e_name,this.editForm.url=t.url,this.editForm.e_description=t.e_description):(this.title="添加",this.disabled=!1,this.editForm.id="",this.editForm.p_name="",this.editForm.e_name="",this.editForm.url="",this.editForm.e_description="")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.editForm,v("/project/saveProjectEnvironment",a)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:e.msg})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("项目保存失败，请稍后再试！")})})},projectEnvironmentDelete:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e,i={id:t.id};(e=i,_("/project/deleteProjectEnvironment",e)).then(function(e){e.success?(a.$message({type:"success",message:e.msg}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){a.loading=!1,a.$message.error("项目删除失败，请稍后再试！")})}).catch(function(e){console.log(e)})},closeDialog:function(){this.editFormVisible=!1},loadAllProject:function(){var e=this;ce().then(function(t){e.projects=t})},querySearchAsync:function(e,t){var a=this.projects;t(e?a.filter(this.createStateFilter(e)):a)},createStateFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){console.log(e)},copy:function(e,t){var a=this;this.$confirm("确定要复制吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e,i={id:t.id};(e=i,b("/project/copyEnvironment",e)).then(function(e){e.success?(a.$message({type:"success",message:e.msg}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){console.log(e),a.loading=!1,a.$message.error("复制失败，请稍后再试！")})}).catch(function(e){console.log(e)})}}},he={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("项目环境配置")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"项目名称："}},[a("el-autocomplete",{attrs:{size:"small",placeholder:"输入项目名称","fetch-suggestions":e.querySearchAsync},on:{select:e.handleSelect},model:{value:e.formInline.projectName,callback:function(t){e.$set(e.formInline,"projectName",t)},expression:"formInline.projectName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),e._e(),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"projectName",label:"项目名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"e_name",label:"环境名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"url",label:"url",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"e_description",label:"环境描述",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"create_time",label:"创建时间",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.copy(t.$index,t.row)}}},[e._v("复制")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.projectEnvironmentDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[a("el-autocomplete",{attrs:{size:"small","fetch-suggestions":e.querySearchAsync,placeholder:"请输入项目名称",disabled:e.disabled},on:{select:e.handleSelect},model:{value:e.editForm.p_name,callback:function(t){e.$set(e.editForm,"p_name",t)},expression:"editForm.p_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"环境名称",prop:"e_name"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入环境名称"},model:{value:e.editForm.e_name,callback:function(t){e.$set(e.editForm,"e_name",t)},expression:"editForm.e_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"url",prop:"url"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入url"},model:{value:e.editForm.url,callback:function(t){e.$set(e.editForm,"url",t)},expression:"editForm.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"环境描述",prop:"e_description"}},[a("el-input",{attrs:{type:"textarea",size:"small","auto-complete":"off",placeholder:"请输入环境描述"},model:{value:e.editForm.e_description,callback:function(t){e.$set(e.editForm,"e_description",t)},expression:"editForm.e_description"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var ge=a("VU/8")(pe,he,!1,function(e){a("GbK5")},"data-v-430fbc86",null).exports,fe=function(e){return b("/apiTest/getAllProjectEnvironment",e)},ve=function(e){return b("/apiTest/apiModuleList",e)},be={data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,title:"添加",disabled:!1,editForm:{id:"",e_id:"",e_name:"",m_name:"",m_description:"",create_time:"",token:localStorage.getItem("logintoken")},rules:{e_name:[{required:!0,message:"请输入环境名称",trigger:"blur"}],m_name:[{required:!0,message:"请输入环境名称",trigger:"blur"}],m_description:[{required:!0,message:"请输入url",trigger:"blur"}]},projects:"",state:"",formInline:{page:1,limit:10,varLable:"",varName:"",projectName:"",projectEnvironment_id:"",projectEnvironment_name:"",token:localStorage.getItem("logintoken")},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,oldPageSize:10,total:10},options:"",value:""}},components:{Pagination:P},created:function(){this.loadAllProject()},methods:{getdata:function(e){var t=this;this.loading=!0,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,e={currentPage:this.pageparm.currentPage,pageSize:this.pageparm.pageSize,projectEnvironment_id:this.formInline.projectEnvironment_id},ve(e).then(function(e){t.loading=!1,!1===e.success?t.$message({type:"info",message:e.msg}):(t.listData=e.data,t.pageparm.total=e.count)}).catch(function(e){t.loading=!1,console.log(e),t.$message.error("菜单加载失败，请稍后再试！")})},callFather:function(e){this.pageparm.pageSize!==e.pageSize?(this.formInline.page=1,this.formInline.limit=e.pageSize,this.getdata(this.formInline)):(this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline))},search:function(){this.formInline.page=1,this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.disabled=!0,this.editForm.id=t.id,this.editForm.e_id=this.formInline.projectEnvironment_id,this.editForm.e_name=this.formInline.projectEnvironment_name,this.editForm.m_name=t.module_name,this.editForm.m_description=t.module_description):(this.title="添加",this.disabled=!0,this.editForm.id="",this.editForm.e_id=this.formInline.projectEnvironment_id,this.editForm.e_name=this.formInline.projectEnvironment_name,this.editForm.m_name="",this.editForm.m_description="")},closeDialog:function(){this.editFormVisible=!1},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.editForm,v("/apiTest/saveApiModule",a)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:e.msg})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("项目保存失败，请稍后再试！")})})},apiModuleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e,i={id:t.id};(e=i,_("/apiTest/deleteApiModule",e)).then(function(e){e.success?(a.$message({type:"success",message:e.msg}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){console.log(e),a.loading=!1,a.$message.error("项目删除失败，请稍后再试！")})}).catch(function(e){console.log(e)})},loadAllProject:function(){var e=this;ce().then(function(t){e.projects=t})},querySearchAsync:function(e,t){var a=this.projects;t(e?a.filter(this.createStateFilter(e)):a)},createStateFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){this.loadAllProjectEnvironment(e)},loadAllProjectEnvironment:function(e){var t=this,a={name:e.value};fe(a).then(function(e){t.options=e})},handleChange:function(e){this.formInline.projectEnvironment_id=e;var t;t=this.options.find(function(t){return t.value===e}),this.formInline.projectEnvironment_name=t.label,this.getdata(this.formInline)},inputChange:function(){this.formInline.projectEnvironment_id="",this.formInline.projectEnvironment_name="",this.options="",this.value=""}}},_e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("模块管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"项目名称："}},[a("el-autocomplete",{attrs:{size:"small",placeholder:"输入项目名称","fetch-suggestions":e.querySearchAsync},on:{select:e.handleSelect,input:e.inputChange},model:{value:e.formInline.projectName,callback:function(t){e.$set(e.formInline,"projectName",t)},expression:"formInline.projectName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目环境名称："}},[a("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择"},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),e._e(),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"module_name",label:"模块名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"module_description",label:"模块描述",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"create_time",label:"创建时间",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.apiModuleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"环境名称",prop:"e_name"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入环境名称",disabled:e.disabled},model:{value:e.editForm.e_name,callback:function(t){e.$set(e.editForm,"e_name",t)},expression:"editForm.e_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模块名称",prop:"m_name"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入模块名称"},model:{value:e.editForm.m_name,callback:function(t){e.$set(e.editForm,"m_name",t)},expression:"editForm.m_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模块描述",prop:"m_description"}},[a("el-input",{attrs:{type:"textarea",size:"small","auto-complete":"off",placeholder:"请输入模块描述"},model:{value:e.editForm.m_description,callback:function(t){e.$set(e.editForm,"m_description",t)},expression:"editForm.m_description"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var ye=a("VU/8")(be,_e,!1,function(e){a("+rKi")},"data-v-1202c256",null).exports,Ie={name:"apiManagement",data:function(){return{nshow:!0,fshow:!1,loading:!1,editFormVisible:!1,environmentVariableVisible:!1,e_editFormVisible:!1,title:"添加",e_title:"添加",editForm:{id:"",module_name:"",module_id:"",request_method:"",api_name:"",url:"",summary:"",seq:"",independent:!1,token:localStorage.getItem("logintoken")},e_editForm:{id:"",e_id:"",name:"",value:""},rules:{module_name:[{required:!0,message:"请输入模块名称",trigger:"blur"}],request_method:[{required:!0,message:"请选择请求方法",trigger:"blur"}],api_name:[{required:!0,message:"请输入接口名称",trigger:"blur"}],url:[{required:!0,message:"请输入url",trigger:"blur"}],independent:[{required:!0,message:"请选择是否为独立接口",trigger:"blur"}]},projects:"",state:"",api_modules:"",formInline:{page:1,limit:10,varLable:"",varName:"",projectName:"",projectEnvironment_id:"",projectEnvironment_name:"",module_id:"",module_name:"",token:localStorage.getItem("logintoken")},e_formInline:{page:1,limit:10,projectEnvironment_id:""},seletedata:{ids:"",token:localStorage.getItem("logintoken")},userparm:[],listData:[],pageparm:{currentPage:1,pageSize:10,oldPageSize:10,total:10},e_pageparm:{currentPage:1,pageSize:10,oldPageSize:10,total:10},options:"",value:"",request_method_options:[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"}],environmentVariableData:[]}},components:{Pagination:P},created:function(){this.loadAllProject()},methods:{getdata:function(e){var t,a=this;this.loading=!0,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,e={currentPage:this.pageparm.currentPage,pageSize:this.pageparm.pageSize,projectEnvironmentId:this.formInline.projectEnvironment_id,apiModuleId:this.formInline.module_id,apiModuleName:this.formInline.module_name},(t=e,b("/apiTest/apiList",t)).then(function(e){a.loading=!1,!1===e.success?a.$message({type:"info",message:e.msg}):(a.listData=e.data,a.pageparm.total=e.count)}).catch(function(e){a.loading=!1,console.log(e),a.$message.error("菜单加载失败，请稍后再试！")})},callFather:function(e){this.pageparm.pageSize!==e.pageSize?(this.formInline.page=1,this.formInline.limit=e.pageSize,this.getdata(this.formInline)):(this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline))},search:function(){this.formInline.page=1,this.getdata(this.formInline)},handleEdit:function(e,t){this.editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.title="修改",this.editForm.id=t.id,this.editForm.module_id=t.apiModule_id,this.editForm.module_name=t.module_name,this.editForm.request_method=t.request_method,this.editForm.api_name=t.api_name,this.editForm.url=t.url,this.editForm.independent=t.independent,this.editForm.summary=t.summary):""!==this.editForm.module_id&&""!==this.editForm.module_name?(this.title="添加",this.editForm.id="",this.editForm.request_method="",this.editForm.api_name="",this.editForm.url="",this.editForm.summary="",this.editForm.seq=this.pageparm.total+1):(this.title="添加",this.editForm.id="",this.editForm.module_id="",this.editForm.module_name="",this.editForm.request_method="",this.editForm.api_name="",this.editForm.url="",this.editForm.summary="",this.editForm.seq=this.pageparm.total+1)},e_handleEdit:function(e,t){this.e_editFormVisible=!0,void 0!=t&&"undefined"!=t?(this.e_title="修改",this.e_editForm.id=t.id,this.e_editForm.e_id=this.formInline.projectEnvironment_id,this.e_editForm.name=t.name,this.e_editForm.value=t.value):(this.e_title="添加",this.e_editForm.id="",this.e_editForm.e_id=this.formInline.projectEnvironment_id,this.e_editForm.name="",this.e_editForm.value="")},handleEnvironmentVariable:function(){var e=this;this.e_formInline.projectEnvironment_id=this.formInline.projectEnvironment_id,this.e_pageparm.currentPage=this.e_formInline.page,this.e_pageparm.pageSize=this.e_formInline.limit;var t,a={currentPage:this.e_pageparm.currentPage,pageSize:this.e_pageparm.pageSize,e_id:this.e_formInline.projectEnvironment_id};(t=a,b("/apiTest/getEnvironmentVariable",t)).then(function(t){t.success?(e.environmentVariableData=t.data,e.environmentVariableVisible=!0):e.$message({type:"info",message:t.msg})}).catch(function(t){e.loading=!1,e.$message.error("环境变量获取失败，请稍后再试！")})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.editForm,v("/apiTest/saveApi",a)).then(function(e){t.editFormVisible=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:e.msg})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("项目保存失败，请稍后再试！")})})},e_submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.e_editForm,v("/apiTest/saveEnvironmentVariable",a)).then(function(e){t.e_editFormVisible=!1,t.loading=!1,e.success?(t.handleEnvironmentVariable(),t.$message({type:"success",message:e.msg})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.editFormVisible=!1,t.loading=!1,t.$message.error("环境变量失败，请稍后再试！")})})},closeDialog:function(){this.editFormVisible=!1},apiDelete:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e,i={id:t.id,seq:t.seq,apiModule_id:t.apiModule_id};(e=i,_("/apiTest/deleteApi",e)).then(function(e){e.success?(a.$message({type:"success",message:e.msg}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){console.log(e),a.loading=!1,a.$message.error("项目删除失败，请稍后再试！")})}).catch(function(e){console.log(e)})},EnvironmentVariableDelete:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e,i={id:t.id};(e=i,_("/apiTest/deleteEnvironmentVariable",e)).then(function(e){e.success?(a.$message({type:"success",message:e.msg}),a.handleEnvironmentVariable()):a.$message({type:"info",message:e.msg})}).catch(function(e){console.log(e),a.loading=!1,a.$message.error("项目删除失败，请稍后再试！")})}).catch(function(e){console.log(e)})},toTestCase:function(e){this.$router.push({path:"/apiTest/apiManagement/apiTestCase",query:{api_id:e.id}})},loadAllProject:function(){var e=this;ce().then(function(t){e.projects=t})},querySearchAsync1:function(e,t){var a=this.projects;t(e?a.filter(this.createStateFilter(e)):a)},querySearchAsync2:function(e,t){var a=this.api_modules;t(e?a.filter(this.createStateFilter(e)):a)},createStateFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect1:function(e){this.options="",this.value="",this.loadAllProjectEnvironment(e),this.formInline.module_id="",this.formInline.module_name=""},handleSelect2:function(e){this.formInline.module_id=e.id,this.formInline.module_name=e.value,this.editForm.module_id=e.id,this.editForm.module_name=e.value},handleSelect3:function(e){this.editForm.module_id=e.id,this.editForm.module_name=e.value},inputEvent:function(){""===this.formInline.module_name&&(this.formInline.module_id="",this.editForm.module_id="",this.editForm.module_name="")},loadAllProjectEnvironment:function(e){var t=this,a={name:e.value};fe(a).then(function(e){t.options=e})},handleChange:function(e){var t=this;this.formInline.module_name="",this.formInline.module_id="",this.formInline.projectEnvironment_id=e,function(e){return b("/apiTest/getAllApiModule",e)}({id:e}).then(function(e){t.api_modules=e})},inputChange:function(){this.formInline.projectEnvironment_id="",this.formInline.projectEnvironment_name="",this.options="",this.value="",this.formInline.module_id="",this.formInline.module_name=""},upLayer:function(e,t){var a=this,i=this;0===e?i.$message({message:"处于顶端，不能继续上移",type:"warning"}):function(e){return b("/apiTest/upApi",e)}({apiModule_id:t.apiModule_id,seq:t.seq,form_apiModule_name:this.formInline.module_name}).then(function(t){if(!1===t.success)a.$message({type:"info",message:t.msg});else{a.getdata(a.formInline);var o=i.listData[e-1];i.listData.splice(e-1,1),i.listData.splice(e,0,o)}})},downLayer:function(e,t){var a=this,i=this;e+1===i.listData.length?i.$message({message:"处于末端端，不能继续下移",type:"warning"}):function(e){return b("/apiTest/downApi",e)}({apiModule_id:t.apiModule_id,seq:t.seq,form_apiModule_name:this.formInline.module_name}).then(function(t){if(!1===t.success)a.$message({type:"info",message:t.msg});else{a.getdata(a.formInline);var o=i.listData[e+1];i.listData.splice(e+1,1),i.listData.splice(e,0,o)}})},changeStatus:function(e,t){var a=this;(function(e){return b("/apiTest/changeApiStatus",e)})({id:t.id,status:t.status}).then(function(e){!1===e.success&&a.$message({type:"info",message:e.msg})})},closeEnvironmentVariableDialog:function(){this.environmentVariableVisible=!1}}},ke={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("接口管理")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"项目名称："}},[a("el-autocomplete",{attrs:{size:"small",placeholder:"输入项目名称","fetch-suggestions":e.querySearchAsync1},on:{select:e.handleSelect1,input:e.inputChange},model:{value:e.formInline.projectName,callback:function(t){e.$set(e.formInline,"projectName",t)},expression:"formInline.projectName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目环境名称："}},[a("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择"},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"模块："}},[a("el-autocomplete",{attrs:{size:"small",placeholder:"输入模块名称","fetch-suggestions":e.querySearchAsync2},on:{select:e.handleSelect2,input:e.inputEvent},model:{value:e.formInline.module_name,callback:function(t){e.$set(e.formInline,"module_name",t)},expression:"formInline.module_name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEnvironmentVariable()}}},[e._v("环境变量")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),e._e(),e._v(" "),e._e(),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"module_name",label:"所属模块",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"api_name",label:"接口名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"request_method",label:"请求方法",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"url",label:"url",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{prop:"independent",label:"是否为独立接口",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.independent?a("p",[e._v("否")]):e._e(),e._v(" "),!0===t.row.independent?a("p",[e._v("是")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"summary",label:"概述",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"status",label:"状态",width:"75",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.changeStatus(t.$index,t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.toTestCase(t.row)}}},[e._v("测试用例")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.apiDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button-group",[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.upLayer(t.$index,t.row)}}},[e._v("上移")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.downLayer(t.$index,t.row)}}},[e._v("下移")])],1)]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.editFormVisible,width:"30%"},on:{"update:visible":function(t){e.editFormVisible=t},click:e.closeDialog}},[a("el-form",{ref:"editForm",attrs:{"label-width":"120px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"所属模块",prop:"module_name"}},[a("el-autocomplete",{attrs:{size:"small","fetch-suggestions":e.querySearchAsync2,placeholder:"请输入所属模块"},on:{select:e.handleSelect3},model:{value:e.editForm.module_name,callback:function(t){e.$set(e.editForm,"module_name",t)},expression:"editForm.module_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"接口名称",prop:"api_name"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入接口名称"},model:{value:e.editForm.api_name,callback:function(t){e.$set(e.editForm,"api_name",t)},expression:"editForm.api_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"请求方法",prop:"request_method"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.editForm.request_method,callback:function(t){e.$set(e.editForm,"request_method",t)},expression:"editForm.request_method"}},e._l(e.request_method_options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"url",prop:"url"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入url"},model:{value:e.editForm.url,callback:function(t){e.$set(e.editForm,"url",t)},expression:"editForm.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否为独立接口",prop:"independent"}},[a("el-radio-group",{model:{value:e.editForm.independent,callback:function(t){e.$set(e.editForm,"independent",t)},expression:"editForm.independent"}},[a("el-radio",{attrs:{label:!1}},[e._v("否")]),e._v(" "),a("el-radio",{attrs:{label:!0}},[e._v("是")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"概述",prop:"summary"}},[a("el-input",{attrs:{type:"textarea",size:"small","auto-complete":"off",placeholder:"请输入概述"},model:{value:e.editForm.summary,callback:function(t){e.$set(e.editForm,"summary",t)},expression:"editForm.summary"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"环境变量",visible:e.environmentVariableVisible,width:"55%"},on:{"update:visible":function(t){e.environmentVariableVisible=t},click:e.closeDialog}},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.e_handleEdit()}}},[e._v("添加")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{size:"small",data:e.environmentVariableData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),e._e(),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"name",label:"变量名",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"value",label:"变量值",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.e_handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.EnvironmentVariableDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.e_pageparm},on:{callFather:e.callFather}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.e_title,visible:e.e_editFormVisible,width:"30%"},on:{"update:visible":function(t){e.e_editFormVisible=t},click:function(t){e.e_editFormVisible=!1}}},[a("el-form",{ref:"e_editForm",attrs:{"label-width":"120px",model:e.e_editForm}},[a("el-form-item",{attrs:{label:"变量名",prop:"name"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入变量名"},model:{value:e.e_editForm.name,callback:function(t){e.$set(e.e_editForm,"name",t)},expression:"e_editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"变量值",prop:"value"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入变量值"},model:{value:e.e_editForm.value,callback:function(t){e.$set(e.e_editForm,"value",t)},expression:"e_editForm.value"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.e_editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.e_submitForm("e_editForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var we=a("VU/8")(Ie,ke,!1,function(e){a("7lUh")},"data-v-5c709697",null).exports,Fe={data:function(){return{nshow:!0,fshow:!1,loading:!1,api_id:"",formInline:{page:1,limit:10,token:localStorage.getItem("logintoken")},pageparm:{currentPage:1,pageSize:10,oldPageSize:10,total:10},listData:[]}},created:function(){this.getParams(),this.getdata(this.formInline)},methods:{getdata:function(e){var t,a=this;this.loading=!0,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,e={currentPage:this.pageparm.currentPage,pageSize:this.pageparm.pageSize,api_id:this.api_id},(t=e,b("/apiTest/apiTestcaseList",t)).then(function(e){a.loading=!1,0==e.success?a.$message({type:"info",message:e.msg}):(a.listData=e.data,a.pageparm.total=e.count)}).catch(function(e){a.loading=!1,console.log(e),a.$message.error("菜单加载失败，请稍后再试！")})},getParams:function(){this.api_id=this.$route.query.api_id},callFather:function(e){this.pageparm.pageSize!==e.pageSize?(this.formInline.page=1,this.formInline.limit=e.pageSize,this.getdata(this.formInline)):(this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline))},apiTestcaseDelete:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e,i={id:t.id};(e=i,_("/apiTest/deleteApiTestcase",e)).then(function(e){e.success?(a.$message({type:"success",message:e.msg}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){console.log(e),a.loading=!1,a.$message.error("项目删除失败，请稍后再试！")})}).catch(function(e){console.log(e)})},handleEdit:function(e,t){void 0!=t&&"undefined"!=t?this.$router.push({path:"/apiTest/apiManagement/apiTestCase/workbench",query:{id:t.id,api_id:this.api_id}}):this.$router.push({path:"/apiTest/apiManagement/apiTestCase/workbench",query:{id:"",api_id:this.api_id}})},copy:function(e,t){var a=this;this.$confirm("确定要复制吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e,i={id:t.id};(e=i,b("/apiTest/copyTestcase",e)).then(function(e){e.success?(a.$message({type:"success",message:e.msg}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){console.log(e),a.loading=!1,a.$message.error("复制失败，请稍后再试！")})}).catch(function(e){console.log(e)})}}},xe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/apiTest/apiManagement"}}},[e._v("接口管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("测试用例")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleEdit()}}},[e._v("添加")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"id"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"title",label:"标题",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"url",label:"url",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.copy(t.$index,t.row)}}},[e._v("复制")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.apiTestcaseDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}})],1)},staticRenderFns:[]};var Se=a("VU/8")(Fe,xe,!1,function(e){a("C9xk")},"data-v-c0cbf8aa",null).exports,Ne={name:"jsonView",props:{json:[Object,Array],jsonKey:{type:String,default:""},closed:{type:Boolean,default:!1},isLast:{type:Boolean,default:!0},fontSize:{type:Number,default:13}},created:function(){var e=this;this.innerclosed=this.closed,this.$watch("closed",function(){e.innerclosed=e.closed})},data:function(){return{innerclosed:!0}},methods:{isObjectOrArray:function(e){var t=Object.prototype.toString.call(e);return"[object Array]"===t||"[object Object]"===t},toggleClose:function(){this.innerclosed?this.innerclosed=!1:this.innerclosed=!0}},computed:{isArray:function(){return"[object Array]"===Object.prototype.toString.call(this.json)},length:function(){return this.isArray?this.json.length:s()(this.json).length},subfix:function(){return(this.isArray?"]":"}")+(this.isLast?"":",")},prefix:function(){return this.isArray?"[":"{"},items:function(){var e=this;if(this.isArray)return this.json.map(function(t){var a=e.isObjectOrArray(t);return{value:a?t:p()(t),isJSON:a,key:""}});var t=this.json;return s()(t).map(function(a){var i=t[a],o=e.isObjectOrArray(i);return{value:o?i:p()(i),isJSON:o,key:a}})}}},$e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bgView"},[a("div",{class:["json-view",e.length?"closeable":""],style:"font-size:"+e.fontSize+"px"},[e.length?a("span",{class:["angle",e.innerclosed?"closed":""],on:{click:e.toggleClose}}):e._e(),e._v(" "),a("div",{staticClass:"content-wrap"},[a("p",{staticClass:"first-line"},[e.jsonKey?a("span",{staticClass:"json-key"},[e._v('"'+e._s(e.jsonKey)+'": ')]):e._e(),e._v(" "),e.length?a("span",[e._v("\n        "+e._s(e.prefix)+"\n        "+e._s(e.innerclosed?"..."+e.subfix:"")+"\n        "),a("span",{staticClass:"json-note"},[e._v("\n         "+e._s(e.innerclosed?" // count: "+e.length:"")+"\n        ")])]):e._e(),e._v(" "),e.length?e._e():a("span",[e._v(e._s(e.isArray?"[]":"{}"))])]),e._v(" "),!e.innerclosed&&e.length?a("div",{staticClass:"json-body"},[e._l(e.items,function(t,i){return[t.isJSON?a("json-view",{key:i,attrs:{closed:e.closed,json:t.value,jsonKey:t.key,isLast:i===e.items.length-1}}):a("p",{key:i,staticClass:"json-item"},[a("span",{staticClass:"json-key"},[e._v("\n              "+e._s(e.isArray?"":'"'+t.key+'"')+"\n          ")]),e._v("\n            :\n            "),a("span",{staticClass:"json-value"},[e._v("\n              "+e._s(t.value+(i===e.items.length-1?"":","))+"\n          ")])])]}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.innerclosed,expression:"!innerclosed"}],staticClass:"body-line"})],2):e._e(),e._v(" "),!e.innerclosed&&e.length?a("p",{staticClass:"last-line"},[a("span",[e._v(e._s(e.subfix))])]):e._e()])])])},staticRenderFns:[]};var Ae=a("VU/8")(Ne,$e,!1,function(e){a("4H17")},null,null).exports,ze={components:{JsonView:Ae},data:function(){return{id:"",api_id:"",request_method_select:"",activeName:"first",request_method_options:[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"}],apiData:{api_id:"",encode:"utf8",id:"",request_body:"",request_param:"",request_header:"",request_file:[],request_method:"",title:"",url:"",verify:!0,assert:!1,assert_content:"",postProcessor:!1,post_processor_content:" "},debugLog:[],uploadData:{id:""},uploadToken:{Authorization:localStorage.getItem("logintoken")}}},created:function(){this.getParams(),this.getData()},methods:{getData:function(e){var t,a=this;e={id:this.id,api_id:this.api_id},(t=e,b("/apiTest/apiTestcaseData",t)).then(function(e){0==e.success?a.$message({type:"info",message:e.msg}):(a.apiData.api_id=e.data.api_id,a.apiData.encode=e.data.encode,a.apiData.id=e.data.id,a.apiData.request_body=e.data.request_body,a.apiData.request_param=e.data.request_param,a.apiData.request_header=e.data.request_header,a.apiData.request_method=e.data.request_method,a.apiData.title=e.data.title,a.apiData.url=e.data.url,a.apiData.verify="true"===e.data.verify,a.request_method_select=e.data.request_method,a.apiData.assert="true"===e.data.is_assert,a.apiData.assert_content=e.data.assert_content,a.apiData.postProcessor="true"===e.data.is_post_processor,a.apiData.post_processor_content=e.data.post_processor_content,a.apiData.request_file=e.data.file_name)}).catch(function(e){a.loading=!1,console.log(e),a.$message.error("数据加载失败，请稍后再试！")})},handleClick:function(e,t){},getParams:function(){this.id=this.$route.query.id,this.api_id=this.$route.query.api_id,this.uploadData.id=this.$route.query.id},save:function(){var e,t=this;this.apiData.post_processor_content="",(e=this.apiData,v("/apiTest/saveApiTestcase",e)).then(function(e){e.success?(t.$message({type:"success",message:e.msg}),e.hasOwnProperty("id")&&(t.id=e.id,t.apiData.id=e.id,t.uploadData.id=e.id)):t.$message({type:"info",message:e.msg})}).catch(function(e){t.$message.error("保存失败，请稍后再试！")})},sleep:function(e){for(var t=(new Date).getTime();!((new Date).getTime()-t>e););},debug:function(){var e,t=this;(e=this.apiData,v("/apiTest/debugApi",e)).then(function(e){e.success?(t.debugLog=e.data,console.log(t.debugLog)):t.$message({type:"info",message:e.msg})})},jsonView:function(e){var t=e.match(/\{.*\}/);try{return JSON.parse(t[0])}catch(t){return console.log(t),e}},uploadSuccess:function(e,t,a){""===this.apiData.request_file&&(this.apiData.request_file=[]),this.apiData.request_file.push({name:e.file_name,realname:e.real_file_name}),console.log(this.apiData.request_file)},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},removeFile:function(e,t){var a,i=this,o={id:this.apiData.id,file:e.name};(a=o,_("/apiTest/deleteUploadFile",a)).then(function(t){t.success?(i.$message({type:"success",message:t.msg}),i.apiData.request_file.some(function(t,a){if(t.name===e.name)return i.apiData.request_file.splice(i.apiData.request_file.indexOf(a),1),!0}),console.log(i.apiData.request_file)):i.$message({type:"info",message:t.msg})}).catch(function(e){console.log(e),i.loading=!1,i.$message.error("移除文件失败，请稍后再试！")})}}},De={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/apiTest/apiManagement"}}},[e._v("接口管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/apiTest/apiManagement/apiTestCase",query:{api_id:e.api_id}}}},[e._v("测试用例")]),e._v(" "),a("el-breadcrumb-item",[e._v("工作台")])],1),e._v(" "),a("div",{staticStyle:{margin:"20px"}}),e._v(" "),a("el-form",{attrs:{model:e.apiData,"label-width":"70px","label-position":"left",size:"small"}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{staticStyle:{width:"680px"},attrs:{size:"small","auto-complete":"off",placeholder:"标题"},model:{value:e.apiData.title,callback:function(t){e.$set(e.apiData,"title",t)},expression:"apiData.title"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"primary"},on:{click:e.debug}},[e._v("调试")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"},on:{click:e.save}},[e._v("保存")])],1),e._v(" "),a("el-form-item",{attrs:{label:"url"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"680px"},attrs:{size:"small",disabled:!0},model:{value:e.apiData.url,callback:function(t){e.$set(e.apiData,"url",t)},expression:"apiData.url"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",placeholder:"请选择",size:"small",disabled:"true"},slot:"prepend",model:{value:e.request_method_select,callback:function(t){e.request_method_select=t},expression:"request_method_select"}},e._l(e.request_method_options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"字符编码"}},[a("el-input",{staticStyle:{width:"680px"},attrs:{size:"small","auto-complete":"off",placeholder:"字符编码"},model:{value:e.apiData.encode,callback:function(t){e.$set(e.apiData,"encode",t)},expression:"apiData.encode"}})],1),e._v(" "),a("el-checkbox",{model:{value:e.apiData.verify,callback:function(t){e.$set(e.apiData,"verify",t)},expression:"apiData.verify"}},[e._v("跳过SSL校验")]),e._v(" "),a("el-checkbox",{model:{value:e.apiData.assert,callback:function(t){e.$set(e.apiData,"assert",t)},expression:"apiData.assert"}},[e._v("是否需要断言")]),e._v(" "),a("el-checkbox",{model:{value:e.apiData.postProcessor,callback:function(t){e.$set(e.apiData,"postProcessor",t)},expression:"apiData.postProcessor"}},[e._v("后置处理")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.apiData.assert,expression:"apiData.assert"}],staticStyle:{"margin-top":"18px"}},[a("el-form-item",{attrs:{label:"断言"}},[a("el-input",{staticStyle:{"margin-top":"10px"},attrs:{type:"textarea",rows:3,placeholder:'输入预取断言字段，[{"pattern":"in", "content":"success1"},{"pattern":"equal", "content":"success2"},{"pattern":"not in", "content":"success3"},{"pattern":"not equal", "content":"success4"}]'},model:{value:e.apiData.assert_content,callback:function(t){e.$set(e.apiData,"assert_content",t)},expression:"apiData.assert_content"}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.apiData.postProcessor,expression:"apiData.postProcessor"}],staticStyle:{"margin-top":"18px"}},[a("el-form-item",{attrs:{label:"后置处理"}},[a("el-input",{staticStyle:{"margin-top":"10px"},attrs:{type:"textarea",rows:3,placeholder:'输入匹配规则，如{"name1":"key1[0].key2","name2":"key3"}，可获取响应头和响应体的数据存入环境变量，现仅适用于响应体是json格式的情况'},model:{value:e.apiData.post_processor_content,callback:function(t){e.$set(e.apiData,"post_processor_content",t)},expression:"apiData.post_processor_content"}})],1)],1),e._v(" "),a("el-tabs",{staticStyle:{"margin-top":"18px"},attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"Headers",name:"first"}},[a("el-input",{attrs:{type:"textarea",rows:6,placeholder:'输入字典，如：{"Content-Type": "application/json;charset=UTF-8", "Authorization": "xxxxxxxxxxxxx"}'},model:{value:e.apiData.request_header,callback:function(t){e.$set(e.apiData,"request_header",t)},expression:"apiData.request_header"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Body",name:"second",id:"body",disabled:""!==this.apiData.request_param||0!==this.apiData.request_file.length}},[a("el-input",{attrs:{type:"textarea",rows:6,placeholder:'输入字典，以data形式传输，如：{ "channel": "whatsapp", "to": "85259842833", "whatsapp":{ "type":"text", "text": { "body": "测试" }, "preview_url":false } }'},model:{value:e.apiData.request_body,callback:function(t){e.$set(e.apiData,"request_body",t)},expression:"apiData.request_body"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Params",name:"third",id:"param",disabled:""!==this.apiData.request_body||0!==this.apiData.request_file.length}},[a("el-input",{attrs:{type:"textarea",rows:6,placeholder:'输入字典，以params形式传输，如：{ "channel": "whatsapp", "to": "85259842833", "whatsapp":{ "type":"text", "text": { "body": "测试" }, "preview_url":false } }'},model:{value:e.apiData.request_param,callback:function(t){e.$set(e.apiData,"request_param",t)},expression:"apiData.request_param"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Upload",name:"fourth",id:"upload",disabled:""!==this.apiData.request_body||""!==this.apiData.request_param}},[a("div",{staticStyle:{width:"360px"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/apiTest/uploadFile",headers:e.uploadToken,data:e.uploadData,"with-credentials":!0,"on-remove":e.removeFile,"on-success":e.uploadSuccess,"before-remove":e.beforeRemove,"file-list":e.apiData.request_file}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("現在只支持上傳一個文件，多個文件的情況等遇到了再去擴展")])],1)],1)])],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-card",{staticClass:"box-card;"},[a("el-scrollbar",{staticStyle:{height:"500px","overflow-wrap":"break-word"}},e._l(e.debugLog,function(t){return a("div",[t.includes("INFO")?a("div",[t.includes("{")?a("span",[e._v(e._s(t.split(" : ")[0]+" : "+t.split(" : ")[1].split(":")[0]+":")),a("JsonView",{attrs:{json:e.jsonView(t)}})],1):a("span",[e._v(e._s(t))])]):t.includes("ERROR")?a("div",[a("span",{staticStyle:{color:"red"}},[e._v(e._s(t))])]):e._e()])}),0)],1)],1)],1)},staticRenderFns:[]};var Ce=a("VU/8")(ze,De,!1,function(e){a("vzkE")},"data-v-3f514bbe",null).exports,Te={data:function(){return{nshow:!0,fshow:!1,loading:!1,addFormVisible1:!1,addFormVisible2:!1,title:"添加",addForm:{token:localStorage.getItem("logintoken")},projects:"",formInline:{page:1,limit:10,varLable:"",varName:"",projectName:"",title:"",token:localStorage.getItem("logintoken")},a_formInline:{projectName:"",projectEnvironment_id:"",projectEnvironment_name:"",title:"",summary:"",moduleSelection:[],token:localStorage.getItem("logintoken")},rules:{title:[{required:!0,message:"请输入任务标题",trigger:"blur"}]},pageparm:{currentPage:1,pageSize:10,oldPageSize:10,total:10},taskData:[],listData:[],options:"",value:""}},components:{Pagination:P},created:function(){this.getdata(this.formInline),this.loadAllProject()},methods:{getdata:function(e){var t,a=this;this.loading=!0,this.pageparm.currentPage=this.formInline.page,this.pageparm.pageSize=this.formInline.limit,e={currentPage:this.pageparm.currentPage,pageSize:this.pageparm.pageSize,projectName:this.formInline.projectName,title:this.formInline.title},(t=e,b("/apiTest/apiTestTaskList",t)).then(function(e){a.loading=!1,!1===e.success?a.$message({type:"info",message:e.msg}):(a.taskData=e.data,a.pageparm.total=e.count)}).catch(function(e){a.loading=!1,console.log(e),a.$message.error("菜单加载失败，请稍后再试！")})},getModuledata:function(e){var t=this;this.loading=!0,e={projectEnvironment_id:this.a_formInline.projectEnvironment_id},ve(e).then(function(e){t.loading=!1,!1===e.success?t.$message({type:"info",message:e.msg}):t.listData=e.data}).catch(function(e){t.loading=!1,console.log(e),t.$message.error("菜单加载失败，请稍后再试！")})},handleSelect1:function(e){this.loadAllProjectEnvironment(e)},loadAllProjectEnvironment:function(e){var t=this,a={name:e.value};fe(a).then(function(e){t.options=e})},querySearchAsync1:function(e,t){var a=this.projects;t(e?a.filter(this.createStateFilter(e)):a)},createStateFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},loadAllProject:function(){var e=this;ce().then(function(t){e.projects=t})},callFather:function(e){this.pageparm.pageSize!==e.pageSize?(this.formInline.page=1,this.formInline.limit=e.pageSize,this.getdata(this.formInline)):(this.formInline.page=e.currentPage,this.formInline.limit=e.pageSize,this.getdata(this.formInline))},search:function(){this.formInline.page=1,this.getdata(this.formInline)},a_search:function(){this.getModuledata(this.a_formInline)},handleChange:function(e){this.a_formInline.projectEnvironment_id=e;var t;t=this.options.find(function(t){return t.value===e}),this.a_formInline.projectEnvironment_name=t.label,this.getModuledata(this.a_formInline)},handleAdd:function(e,t){this.addFormVisible1=!0,this.title="添加任务"},closeDialog1:function(){this.addFormVisible1=!1,this.$refs.moduleTable.clearSelection()},closeDialog2:function(){this.addFormVisible2=!1},handleSelectionChange:function(e){this.a_formInline.moduleSelection=e},submit1:function(){0===this.a_formInline.moduleSelection.length?this.$message({type:"info",message:"未选择模块"}):this.addFormVisible2=!0},submit2:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=t.a_formInline,v("/apiTest/addApiTestTask",a)).then(function(e){t.addFormVisible1=!1,t.addFormVisible2=!1,t.loading=!1,e.success?(t.getdata(t.formInline),t.$message({type:"success",message:e.msg})):t.$message({type:"info",message:e.msg})}).catch(function(e){t.addFormVisible1=!1,t.addFormVisible2=!1,t.loading=!1,t.$message.error("任务提交失败，请稍后再试！")}),console.log(t.a_formInline)})},apiTestTaskDelete:function(e,t){var a=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e,i={id:t.id};(e=i,_("/apiTest/deleteApiTestTask",e)).then(function(e){e.success?(a.$message({type:"success",message:e.msg}),a.getdata(a.formInline)):a.$message({type:"info",message:e.msg})}).catch(function(e){console.log(e),a.loading=!1,a.$message.error("任务删除失败，请稍后再试！")})}).catch(function(e){console.log(e)})},toTestReport:function(e){this.$router.push({path:"/apiTest/apiTestTask/apiTestReport",query:{task_id:e.id}})}}},Ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("测试任务")])],1),e._v(" "),a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"所属项目："}},[a("el-autocomplete",{attrs:{size:"small",placeholder:"输入项目名称","fetch-suggestions":e.querySearchAsync1},on:{select:e.handleSelect1},model:{value:e.formInline.projectName,callback:function(t){e.$set(e.formInline,"projectName",t)},expression:"formInline.projectName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"标题："}},[a("el-input",{attrs:{size:"small",placeholder:"输入标题"},model:{value:e.formInline.title,callback:function(t){e.$set(e.formInline,"title",t)},expression:"formInline.title"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加任务")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.taskData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"title",label:"任务标题",width:"300"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"projectName",label:"所属项目",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"summary",label:"任务描述",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"create_time",label:"创建时间",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"status",label:"状态",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?a("p",[e._v("待执行")]):e._e(),e._v(" "),1===t.row.status?a("p",[e._v("执行中")]):e._e(),e._v(" "),2===t.row.status?a("p",[e._v("执行完成")]):e._e(),e._v(" "),3===t.row.status?a("p",[e._v("执行失败")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.toTestReport(t.row)}}},[e._v("测试报告")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.apiTestTaskDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("Pagination",{attrs:{"child-msg":e.pageparm},on:{callFather:e.callFather}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.addFormVisible1,width:"40%"},on:{"update:visible":function(t){e.addFormVisible1=t},click:e.closeDialog1}},[a("el-form",{staticClass:"user-search",attrs:{inline:!0,model:e.a_formInline}},[a("el-form-item",{attrs:{label:"项目名称："}},[a("el-autocomplete",{attrs:{size:"small",placeholder:"输入项目名称","fetch-suggestions":e.querySearchAsync1},on:{select:e.handleSelect1},model:{value:e.a_formInline.projectName,callback:function(t){e.$set(e.a_formInline,"projectName",t)},expression:"a_formInline.projectName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目环境名称："}},[a("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择"},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.a_search}},[e._v("搜索")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"moduleTable",staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,"highlight-current-row":"",border:"","element-loading-text":"拼命加载中","max-height":"400"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"60"}}),e._v(" "),e._e(),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"module_name",label:"模块名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"module_description",label:"模块描述"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer",align:"center"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog1}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:e.submit1}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.addFormVisible2,width:"30%"},on:{"update:visible":function(t){e.addFormVisible2=t},click:e.closeDialog2}},[a("el-form",{ref:"a_formInline",attrs:{"label-width":"120px",model:e.a_formInline,rules:e.rules}},[a("el-form-item",{attrs:{label:"任务标题",prop:"title"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入任务标题"},model:{value:e.a_formInline.title,callback:function(t){e.$set(e.a_formInline,"title",t)},expression:"a_formInline.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务描述",prop:"summary"}},[a("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入任务描述"},model:{value:e.a_formInline.summary,callback:function(t){e.$set(e.a_formInline,"summary",t)},expression:"a_formInline.summary"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeDialog2}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary",loading:e.loading},on:{click:function(t){return e.submit2("a_formInline")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var qe=a("VU/8")(Te,Ee,!1,function(e){a("muXY")},"data-v-0eb45710",null).exports,Ve={components:{JsonView:Ae},data:function(){return{task_id:"",listData:[],all_count:"",pass_count:"",fail_count:"",report_title:"",logDialogVisible:!1,title:"日志",debugLog:[]}},created:function(){this.getParams(),this.getdata()},methods:{getParams:function(){this.task_id=this.$route.query.task_id},getdata:function(e){var t,a=this;e={task_id:this.task_id},(t=e,b("/apiTest/apiTestReport",t)).then(function(e){a.loading=!1,!1===e.success?a.$message({type:"info",message:e.msg}):(a.listData=e.data,a.all_count=e.all_count,a.pass_count=e.pass_count,a.fail_count=e.fail_count,a.report_title=e.title,console.log(e.all_count))}).catch(function(e){a.loading=!1,console.log(e),a.$message.error("菜单加载失败，请稍后再试！")})},checkLog:function(e){this.debugLog=e.output_log,this.logDialogVisible=!0},jsonView:function(e){var t=e.match(/\{.*\}/);try{return JSON.parse(t[0])}catch(t){return console.log(t),e}},tableRowStyle:function(e){var t=e.row,a=(e.rowIndex,{});return 1===t.status?a.background="#a8c2a6":a.background="#f5c1bf",a}}},je={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/apiTest/apiTestTask"}}},[e._v("测试任务")]),e._v(" "),a("el-breadcrumb-item",[e._v("测试用例")])],1),e._v(" "),a("div",{staticStyle:{margin:"20px"}}),e._v(" "),a("div",[a("div",{staticStyle:{"font-size":"40px","font-family":"Avenir,Helvetica,Arial,sans-serif"}},[e._v(e._s(e.report_title))]),e._v(" "),a("div",{staticStyle:{"font-family":"Avenir,Helvetica,Arial,sans-serif"}},[e._v("测试结果：总共 "+e._s(e.all_count)+"，通过"+e._s(e.pass_count)+"，失败"+e._s(e.fail_count)+"，通过率= "+e._s(parseFloat(e.pass_count/e.all_count*100).toFixed(2)))])]),e._v(" "),a("div",{staticStyle:{margin:"20px"}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{size:"small",data:e.listData,border:"","element-loading-text":"拼命加载中","header-cell-style":{background:"#eef1f6",color:"#606266"}}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{staticStyle:{width:"calc(100% - 47px)"},attrs:{data:t.row.testcase,size:"small",border:"","header-cell-style":{background:"#eef1f6"},"row-style":e.tableRowStyle,"show-header":!1}},[a("el-table-column",{attrs:{sortable:"",prop:"testcase_name",label:"用例名称"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?a("el-tag",{attrs:{type:"success"}},[e._v("通过")]):e._e(),e._v(" "),2===t.row.status?a("el-tag",{attrs:{type:"danger"}},[e._v("失败")]):e._e()]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.checkLog(t.row)}}},[e._v("日志")])]}}],null,!0)})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"api_name",label:"api名称"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"module_name",label:"模块套件"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"all_count",label:"总计",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"pass_count",label:"通过",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"fail_count",label:"失败",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"!==t.row.fail_count?a("div",{staticStyle:{color:"#EA1B29"}},[e._v(e._s(t.row.fail_count))]):e._e()]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.logDialogVisible,width:"65%"},on:{"update:visible":function(t){e.logDialogVisible=t}}},[a("el-card",{staticClass:"box-card;"},[a("el-scrollbar",{staticStyle:{height:"500px","overflow-wrap":"break-word"}},e._l(e.debugLog,function(t){return a("div",[t.includes("INFO")?a("div",[t.includes("{")?a("span",[e._v(e._s(t.split(" : ")[0]+" : "+t.split(" : ")[1].split(":")[0]+":")),a("JsonView",{attrs:{json:e.jsonView(t)}})],1):a("span",[e._v(e._s(t))])]):t.includes("ERROR")?a("div",[a("span",{staticStyle:{color:"red"}},[e._v(e._s(t))])]):e._e()])}),0)],1)],1)],1)},staticRenderFns:[]};var Ue=a("VU/8")(Ve,je,!1,function(e){a("kgxY")},"data-v-44f2016d",null).exports;r.default.use(d.a);var Pe=new d.a({routes:[{path:"/",name:"",component:z,hidden:!0,meta:{requireAuth:!1,keepAlive:!1}},{path:"/login",name:"登录",component:z,hidden:!0,meta:{requireAuth:!1,keepAlive:!1}},{path:"/index",name:"首页",component:j,iconCls:"el-icon-tickets",children:[{path:"/system/user",name:"用户管理",component:M,meta:{requireAuth:!0,keepAlive:!1}},{path:"/system/Module",name:"菜单管理",component:K,meta:{requireAuth:!0,keepAlive:!1}},{path:"/system/Role",name:"角色管理",component:G,meta:{requireAuth:!0,keepAlive:!1}},{path:"/system/Dept",name:"公司管理",component:Q,meta:{requireAuth:!0,keepAlive:!1}},{path:"/system/Variable",name:"系统环境变量",component:ee,meta:{requireAuth:!0,keepAlive:!1}},{path:"/system/Permission",name:"权限管理",component:ie,meta:{requireAuth:!0,keepAlive:!1}},{path:"/charts/statistics",name:"数据可视化",component:le,meta:{requireAuth:!0,keepAlive:!1}},{path:"/project/project",name:"项目管理",component:ue,meta:{requireAuth:!0,keepAlive:!1}},{path:"/project/projectEnvironment",name:"项目环境配置",component:ge,meta:{requireAuth:!0,keepAlive:!1}},{path:"/apiTest/apiModule",name:"功能模块管理",component:ye,meta:{requireAuth:!0,keepAlive:!1}},{path:"/apiTest/apiManagement",name:"接口管理",component:we,meta:{requireAuth:!0,keepAlive:!0}},{path:"/apiTest/apiManagement/apiTestCase",name:"测试用例管理",component:Se,meta:{requireAuth:!0,keepAlive:!1}},{path:"/apiTest/apiManagement/apiTestCase/workbench",name:"工作台",component:Ce,meta:{requireAuth:!0,keepAlive:!1}},{path:"/apiTest/apiTestTask",name:"测试任务",component:qe,meta:{requireAuth:!0,keepAlive:!1}},{path:"/apiTest/apiTestTask/apiTestReport",name:"测试报告",component:Ue,meta:{requireAuth:!0,keepAlive:!1}}]}]}),Re=a("NYxO");r.default.use(Re.a);var Le=new Re.a.Store({state:{user:!1},mutations:{login:function(e,t){e.user=t,localStorage.setItem("userInfo",t)},logout:function(e,t){e.user="",localStorage.setItem("userInfo","")}}});a("7xIN");r.default.prototype.$echarts=se.a,r.default.prototype.$axios=g.a,r.default.config.productionTip=!1,r.default.use(l.a),s()(i).forEach(function(e){r.default.filter(e,i[e])}),g.a.interceptors.response.use(function(e){return 401===e.data.code&&n.MessageBox.alert("登錄已過期，請先登錄","提示",{confirmButtonText:"確定",callback:function(e){localStorage.removeItem("userInfo"),localStorage.removeItem("logintoken"),localStorage.removeItem("userdata"),Pe.replace({path:"/login"})}}),e}),Pe.beforeEach(function(e,t,a){0!=e.matched.length?e.meta.requireAuth?Boolean(localStorage.getItem("userInfo"))?a():(console.log(e.fullPath),a({path:"/login",query:{redirect:e.fullPath}})):Boolean(localStorage.getItem("userInfo"))?"/"!=e.path&&"/login"!=e.path?a():a({path:"/project/project"}):a():a({path:"/login",query:{redirect:e.fullPath}})}),new r.default({el:"#app",router:Pe,store:Le,components:{App:m},template:"<App/>",data:{Bus:new r.default}})},"RW+O":function(e,t){},Xtd4:function(e,t){},"dLd/":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAGUUlEQVRoQ+2YdYildRSGn2Pr2t0tdreo2CgqdmN3r93dXdiN3YGCYGC3otiKun/YsSrmquuRZzmz3B13nDsz986O4IHLwHzf/e55z+8973nPF/zHI/7j+fM/gP46wcycGVgPuCEifs7MsSNi+IA/gcycAzgCWAlYPSI+y8z5AQG8OWABZOa8wFHA1sCXwIoR8XElvxpwe0R8PeAAZObCwDHAJsBYwLfAyhHxdmbOA6wNDIqI06XvgAGQmUsBxwLrN/TVj8BqEfFyZs4JrANMWPQ5Y0AAqMRPAdbqJAi/We2IeCIzZwQ2M3FgEuDziLhijALIzBWLKp0TN68/gQ0j4sHMnArYGZgASGAc4JWIuH+MAMjMNYGj5XUXEvwXsE1E3JqZVnvfovqkwK/AuMB9EfFivwLITDXc5lzmX2aHye8VEZdnphU/tO6V9z8VfSYDDnYWtB1AZqoiG1fFF21i6O1RyUuTM6viJj4t8BkwKzAsIg7ueFZbVMgpCWwFHAk4dJqJI5TGAn0+8FXx3n6QPsbvwDcRcXZbAGSm/NweOByYq5ms654zIsLvkJnnAu8BU5RkSqVhpUBTVgNf1VIAxdddirOz9CBxb70sIvas5E8FhgBOYRP/AZgY+AWYHJD3T0XEvS0BkJmDgD1sKmD6Hibu7beU4mRmegJyf76ij9y3qccrEH8AUwOnRcS7fQJQiQ8GDgDU6d7EA6X1wzPTflFejWcBp66Vnw74tE5j/JLQHSJCYCOiR02cmUrYPn1M3N99vKbssJLXvYCnge+BdYGhTlsbtkCYp4D+ighPfGQ0BSAzbR6r7VARRF/ipfI3P2XmKsCFwAmVuBR6AZgBWAT4pGhjD+iLtNCCbQ5AZnqE8tsmk+99jbfKWQ7NzKWB26qHjgeuAxQAB937wDvAbNW8DrLhgouIy7oFUNvPYYDKohq0Ij4qT/95Zi4IPATsWAPLBtZd2hfqv1ba+9V9lUgA5nFNRDzfJYCG7Uctt/tbFU7RjoXEBn0CUAQ0aXfU30uBXYEvgCeBhYAlCpAgbOLdIsI+GZVCmTkRcBGwU6sybniODelC8lbZ4qeAK+u6kqnuq/FaDQfUQYBGzWEmWGlkr04TEct1zm9kE2emOr57fWyiVkTjQqLcWnmTs+p6HRXtcuA8YNUCckNR1+n7clVe4Zg1ItzGRol/qFDZgY1KcfTsvY3GhURb/GjJpGr2cG1etwP7F4gDAfvO/znEpJe78Kt1AtFhN7pt4o4baj9VhbaoSjQLpnEhURpNWClW4x8BtAwrNDxM3q9RQPy9+2qp2bRc6AfAM+4I3Z7A6DLMTEe4iqScamn/LRoXEu30jTVlbUjpokQ+U7TZErgeOK4+Umn2Wh8vqd9yY3OoabVHWoiOBJoaZA0nok126Za7q3eBYoSn91pmqiwqmvdu4AAriXy9CqLdPgdwJz6xZo4gVCPV5jFggTq56RotRK8ANCZc720EYoJy3Bjh6St5/x4CbF4mzQG0eJ3Cd4B6LjU9AZVH/m9Xz3muliALYD9sHBGLja5gPTqBLuhl8g6k8SPirErewXRa2Q+VR8po2FS3kwEthEnaEzatk3gHwF3g2vqem5zKeI9LUURIt39EnwF0fmJmarasnDSyqm8AdwNXV9L2ksmoUq8B+xU4Oa+ECs5rApdiDwLvdpxsr5q4WempdVDDN3fRwsVDATApKaM90POoJkuWdbaBHVBedzpLvQuqH+wdh93giNB69MsJ+D7n3lIu5dKPp7J3OUxtwk2ViZx3ODmdtwXurAb2Za6AlE+be6aIUGr7BYAvn1QQK31BRAzJTLVdKfTdpnbYyjqRTdQKdxhGLYX0MdkNAZf7wyOiy22vHT0ggMZweRGMw8lhNlNVXSBK5IeAk/+uklZfGUpDVUuJXWp0FqLPMtpVX7jcdnHNU7EnPJXXMlMg+p/dqslPKqpdXK/VfRfqadjA9sZooz9OoPMPexLutSNtcWY64HSjyzbQyWHnKR3TeYlpfGB/A7D6XVazXqHrWm8utyqdlu+8xIwpADtGhL3QbdR+4kLjfrBMREilMUYht6lV5H23mffihnZTSB47F9y62hLtBKAVMPlRdthWo2gXgOsjQnPW9mgHACWyqWZtBbqWA2hFUj15xv8AelKtdtz7N3tXKk830y/qAAAAAElFTkSuQmCC"},gQKk:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA/0lEQVRYR+2W6w2CQBCEZyqRDrQEO9ASLAE7sAO1A+kAK1A7wA6wA61gzSVH4uPgbgMHJrK/l5kv++KIgYMD+2ME+KqAiKQAFpFacyS5e9V2ASwBzCIBFCTzRoBIxrWy4xCOFWhVARFJAEwUg3sjWfrW0Kxg8rkuLhN7M7YKgIzkygcwB3ACcAawJlkoDNSprkNUAVRiBwtyV6sHfBACYGSM+YbkPkBTlRIK8LAAb3dc5VSTHAKQAUhJ9t6CizXufQiHXUNNX+0hMscoNErvIQpV6iqv1SnuAmIE+L0KiIh5lE676K9D4+p9lNpfrIGIEbn3WR7DtUnz92bg7yrwBOSXVCGtUZf9AAAAAElFTkSuQmCC"},kgxY:function(e,t){},muXY:function(e,t){},paIn:function(e,t){},ppCh:function(e,t){},qPdO:function(e,t){},rWRm:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA80lEQVRYR+1W2xVBMRCcqYAO6IASqIASdEAHdEALOrg6UAIdUMk4e04+4rivuJL4yH4nO7OzTyKzMTM+CoEPBSTtAKwipeZC8uT7riOwBjCPROBGsmolEAm40W0pwqLAIAUkTQFMAgr3SfLxVRdIWgB4+A7czDgGEDiT3AQRcFEaiM2HJclrAGDn08YUSBoD2AI4eF7SEJBkMlnURsK3pARsZo+yEDBQlwJbTPvkKfCjdkVoatiGTJOCutLN1oZtfeTUsWHU197miH0aNAn7ora9KwSKAk1H6ewXBVbj4955lLoVa5svhlWdZ3kM1NKGf63ACzUdUCHpu3IjAAAAAElFTkSuQmCC"},sPkX:function(e,t){},tvR6:function(e,t){},vzkE:function(e,t){},y8Ma:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.88db52f6ed4bedf6a10e.js.map